import{_ as W,r as y,o as a,c as P,w as V,a as t,t as l,n as z,d as ee,f as c,g as v,b as x,e as h,h as R,F as f,x as C,j as w,v as A,z as te,S as Z,i as se,A as oe,B as ie,C as $,D as le,E as re,H as ne,I as ae,G as ce}from"./vue-router.js";import{W as _e,T as ue,d as de,v as he,Q as be}from"./cbxmcratingreview-head.js";import{S as me,F as ve}from"./FileUpload.js";import{C as ge}from"./component.js";import{W as pe}from"./cbxmcratingreview-head-alt.js";import{d as D,F as fe,a as we,E as xe}from"./vee-validate.js";const ye={name:"LogIndex",components:{WpHeadAlt:pe,StarRating:me,Full:ve},async mounted(){this.log_id&&await this.getLog()},data(){var o;return{cbxmcratingreview_vue_var,log_status:cbxmcratingreview_vue_var.log_status,log_id:Number((o=this.$route.params)!=null&&o.id?this.$route.params.id:0),statuses:cbxmcratingreview_vue_var.mail_statuses,page:0,log:{},translations:cbxmcratingreview_vue_var.translations,quill_editor_options:{toolbar:[["bold","italic","underline"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],["clean"][{direction:"rtl"}]]},review_statuses:cbxmcratingreview_vue_var.review_statuses,ratings_stars:null,star:4,key:0,cbxmcratingreviewpro_active:cbxmcratingreview_vue_var.cbxmcratingreviewpro_active,half_rating:!!Number(cbxmcratingreview_vue_var.half_rating),submitted:!1}},methods:{refreshData(o){this.getLog(),this.key++},async updateLog(){const{valid:o}=await this.$refs.form.validate();if(o){this.log.ratings.ratings_stars=this.ratings_stars;let s=this.log;this.submitted=!0,await this.axios.post(cbxmcratingreview_vue_var.rest_end_points.save_log,s).then(n=>{if(n.data.success)this.successMessage(n.data.info);else{let m=n.data.info;typeof n.data.error<"u"&&n.data.error&&(m+=n.data.error),this.errorMessage(m)}}).catch(n=>{this.errorMessage(n)}),this.submitted=!1}},getLog(){this.axios.get(this.cbxmcratingreview_vue_var.rest_end_points.get_log+"?id="+this.log_id).then(o=>{var s,n,m,e,r,d;if((s=o==null?void 0:o.data)!=null&&s.error){this.errorMessage((n=o==null?void 0:o.data)==null?void 0:n.error),this.$router.push("/");return}this.log=o.data,this.ratings_stars=(e=(m=this.log)==null?void 0:m.ratings)==null?void 0:e.ratings_stars,(d=(r=this.log)==null?void 0:r.form)!=null&&d.custom_question&&this.log.form.custom_question.forEach((k,q)=>{this.log.questions||(this.log.questions=[]),this.log.questions[q]||(this.log.questions[q]=[])})}).catch(o=>{this.errorMessage(o)})}}},ke={id:"cbxmcratingreview_builder_actions",class:"cbx_builder_actions cbxmcratingreview_builder_actions cbxmcratingreviewlog_builder_actions"},qe={class:"container"},Se={class:"cbxmcratingreview_builder_actions_wrap"},Le={class:"row"},Ve={class:"col-8 is-vertical-align"},Ce={class:"col-4 is-right"},Ue={class:"cbxmcratingreview_log container"},Fe={class:"row"},Re={class:"col-8"},Me={class:"cbxmcratingreview-edit-main"},Te={class:"widefat"},Be={key:0},Ie={class:"row-title"},Ee={for:"tablecell"},Ne={target:"_blank"},Pe={class:"alternate"},Ae={class:"row-title"},De={for:"tablecell"},He={class:"row-title"},ze={for:"tablecell"},We={target:"_blank"},Qe={key:0,class:"alternate"},Ke={class:"row-title"},je={for:"tablecell"},Je={class:"alternate"},Oe={class:"row-title"},Ge={for:"tablecell"},Xe={target:"_blank"},Ye={class:"cbxmcratingreview-form-fields"},Ze={class:"form-group mt-15"},$e={for:"headline"},et=["placeholder"],tt={class:"form-group mt-15"},st={class:"form-group mt-15"},ot={key:0,class:"cbxmcratingreview_review_custom_questions"},it={class:"form-group mt-15"},lt=["id"],rt=["id","onUpdate:modelValue"],nt=["for"],at=["id","onUpdate:modelValue","placeholder"],ct=["id","onUpdate:modelValue","placeholder"],_t=["id","onUpdate:modelValue","placeholder"],ut=["onUpdate:modelValue"],dt=["value"],ht=["id","value","name","checked","onUpdate:modelValue"],bt=["for"],mt=["id","onUpdate:modelValue"],vt=["for"],gt={key:0,class:"form-group mt-15"},pt=["placeholder"],ft={class:"mt-20"},wt={class:"col-4"},xt={id:"cbxmcratingreview-edit-sidebar"},yt={class:"cbxmcratingreview-sidebar-widgets"},kt={class:"cbxmcratingreview-sidebar-widget"},qt={class:"cbxmcratingreview-sidebar-heading"},St={class:"cbxmcratingreview-sidebar-content"},Lt={class:"form-group mt-15"},Vt={value:""},Ct=["value"];function Ut(o,s,n,m,e,r){const d=y("star-rating"),k=y("QuillEditor"),q=y("full"),F=y("Form"),U=y("wp-head-alt");return a(),P(U,{heading:e.translations.app_heading,"class-name":"cbxmcratingreview-page-log cbxmcratingreview-page-listing"},{default:V(()=>{var S,i,p,M,T,B,I,E,Q;return[t("div",ke,[t("div",qe,[t("div",Se,[t("div",Le,[t("div",Ve,[t("h2",null,l(e.translations.edit_review)+" : "+l(e.log_id),1)]),t("div",Ce,[t("button",{class:z(["button primary ld-ext-right",e.submitted?"running":""]),onClick:s[0]||(s[0]=(...L)=>r.updateLog&&r.updateLog(...L))},[ee(l(e.translations.update)+" ",1),s[5]||(s[5]=t("span",{class:"ld ld-spin ld-ring"},null,-1))],2)])])])])]),t("div",Ue,[t("div",Fe,[t("div",Re,[t("div",Me,[t("table",Te,[e.log?(a(),c("tbody",Be,[t("tr",null,[t("td",Ie,[t("label",Ee,l(e.translations.reviewed_by),1)]),t("td",null,[t("a",Ne,l((i=(S=e.log)==null?void 0:S.user)==null?void 0:i.display_name),1)])]),t("tr",Pe,[t("td",Ae,[t("label",De,l(e.translations.created),1)]),t("td",null,l((p=e.log)==null?void 0:p.formatted_create_date),1)]),t("tr",null,[t("td",He,[t("label",ze,l(e.translations.post),1)]),t("td",null,[t("a",We,l((T=(M=e.log)==null?void 0:M.post)==null?void 0:T.post_title),1)])]),t("template",null,[e.log.mod_by?(a(),c("tr",Qe,[t("td",Ke,[t("label",je,l(e.translations.last_update),1)]),t("td",null,l((B=e.log)==null?void 0:B.formatted_update_date),1)])):v("",!0),t("tr",Je,[t("td",Oe,[t("label",Ge,l(e.translations.last_update_by),1)]),t("td",null,[t("a",Xe,l((E=(I=e.log)==null?void 0:I.mod_user)==null?void 0:E.display_name),1)])])])])):v("",!0)]),x(F,{onSubmit:r.updateLog,ref:"form"},{default:V(()=>{var L,N,K,j,J,O,G,X,Y;return[t("div",Ye,[t("div",Ze,[t("label",$e,l(e.translations.headline),1),s[6]||(s[6]=t("br",null,null,-1)),h(t("input",{id:"headline",class:"form-control",type:"text","onUpdate:modelValue":s[1]||(s[1]=u=>e.log.headline=u),placeholder:e.translations.one_line_review},null,8,et),[[R,e.log.headline]])]),t("div",tt,[t("label",null,l(e.translations.edit_your_review),1),s[8]||(s[8]=t("br",null,null,-1)),(a(!0),c(f,null,C((N=(L=e.log)==null?void 0:L.form)==null?void 0:N.custom_criteria,(u,_)=>(a(),c("div",null,[t("label",null,l(u.label),1),s[7]||(s[7]=t("br",null,null,-1)),x(d,{increment:e.half_rating?.5:1,rating:e.ratings_stars[u.criteria_id].score,"onUpdate:rating":b=>e.ratings_stars[u.criteria_id].score=b,"star-size":30},null,8,["increment","rating","onUpdate:rating"])]))),256))]),t("div",st,[t("label",null,l(e.translations.your_review),1),s[9]||(s[9]=t("br",null,null,-1)),x(k,{theme:"snow",content:e.log.comment,"onUpdate:content":s[2]||(s[2]=u=>e.log.comment=u),contentType:"html",style:{height:"250px"},toolbar:e.quill_editor_options,placeholder:e.translations.comment},null,8,["content","toolbar","placeholder"])])]),(J=(j=(K=e.log)==null?void 0:K.form)==null?void 0:j.extrafields)!=null&&J.enable_question?(a(),c("div",ot,[t("h3",null,l(e.translations.questions_and_answers),1),t("div",it,[(a(!0),c(f,null,C((G=(O=e.log)==null?void 0:O.form)==null?void 0:G.custom_question,(u,_)=>(a(),c("div",{class:"cbxmcratingreview-form-field cbxmcratingreview_review_custom_question mt-20",id:"cbxmcratingreview_review_custom_question_"+_},[u.type==="checkbox"?h((a(),c("input",{key:0,type:"checkbox",id:"cbxmcratingreview_q_field_"+_,class:"magic-checkbox","onUpdate:modelValue":b=>e.log.questions[_]=b,"true-value":"1","false-value":"0"},null,8,rt)),[[w,e.log.questions[_]]]):v("",!0),t("label",{class:z(["cbxmcratingreview_q_field_label",u.type!=="checkbox"?"pt-10":""]),for:"cbxmcratingreview_q_field_"+_},l(u.title),11,nt),u.type==="text"?h((a(),c("input",{key:1,id:"cbxmcratingreview_q_field_"+_,class:"form-control mt-5",type:"text","onUpdate:modelValue":b=>e.log.questions[_]=b,placeholder:u.placeholder},null,8,at)),[[R,e.log.questions[_]]]):v("",!0),u.type==="textarea"?h((a(),c("textarea",{key:2,id:"cbxmcratingreview_q_field_"+_,"onUpdate:modelValue":b=>e.log.questions[_]=b,class:"form-control mt-5",placeholder:u.placeholder},null,8,ct)),[[R,e.log.questions[_]]]):v("",!0),u.type==="number"?h((a(),c("input",{key:3,id:"cbxmcratingreview_q_field_"+_,type:"number",class:"form-control","onUpdate:modelValue":b=>e.log.questions[_]=b,placeholder:u.placeholder},null,8,_t)),[[R,e.log.questions[_]]]):v("",!0),u.type==="select"?h((a(),c("select",{key:4,class:"form-control mt-5","onUpdate:modelValue":b=>e.log.questions[_]=b},[(a(!0),c(f,null,C(u.options,(b,g)=>(a(),c("option",{value:g,key:g},l(b.text),9,dt))),128))],8,ut)),[[A,e.log.questions[_]]]):v("",!0),u.type==="radio"?(a(!0),c(f,{key:5},C(u.options,(b,g)=>(a(),c("div",{class:"radio-input mt-10 magic-radio-field mt-5",key:g},[h(t("input",{type:"radio",id:"cbxmcratingreview_q_field_"+_+"_"+g,value:g,name:"cbxmcratingreview_q_field_"+_,class:"magic-radio",checked:g==e.log.questions[_],"onUpdate:modelValue":H=>e.log.questions[_]=H},null,8,ht),[[te,e.log.questions[_]]]),t("label",{for:"cbxmcratingreview_q_field_"+_+"_"+g},l(b.text),9,bt)]))),128)):v("",!0),u.type==="multicheckbox"?(a(!0),c(f,{key:6},C(u.options,(b,g)=>(a(),c("div",{class:"radio-input mt-10 magic-radio-field mt-5",key:g},[h(t("input",{type:"checkbox",id:"cbxmcratingreview_q_field_"+_+"_"+g,class:"magic-checkbox","onUpdate:modelValue":H=>e.log.questions[_][g]=H,"true-value":"1","false-value":"0"},null,8,mt),[[w,e.log.questions[_][g]]]),t("label",{for:"cbxmcratingreview_q_field_"+_+"_"+g},l(b.text),9,vt)]))),128)):v("",!0)],8,lt))),256))]),e.cbxmcratingreviewpro_active?(a(),c(f,{key:0},[e.cbxmcratingreview_vue_var.enable_video?(a(),c(f,{key:0},[e.log.attachment?(a(),c("div",gt,[t("label",null,l(e.translations.add_video),1),s[10]||(s[10]=t("br",null,null,-1)),h(t("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=u=>e.log.attachment.video_url=u),class:"form-control",placeholder:e.translations.video_url_placeholder},null,8,pt),[[R,e.log.attachment.video_url]])])):v("",!0)],64)):v("",!0),e.cbxmcratingreview_vue_var.enable_photo?(a(),c(f,{key:1},[t("div",ft,[t("h3",null,l(e.translations.photos)+" ("+l(e.translations.max_photos+": "+e.cbxmcratingreview_vue_var.max_number_of_files)+")",1)]),(a(),P(q,{uploadedFiles:(Y=(X=e.log)==null?void 0:X.attachment)!=null&&Y.photos?e.log.attachment.photos:[],front:!1,key:e.key,onRefreshData:r.refreshData},null,8,["uploadedFiles","onRefreshData"]))],64)):v("",!0)],64)):v("",!0)])):v("",!0)]}),_:1},8,["onSubmit"])])]),t("div",wt,[t("div",xt,[t("div",yt,[t("div",kt,[t("h5",qt,l(e.translations.status),1),t("div",St,[t("div",Lt,[h(t("select",{"onUpdate:modelValue":s[4]||(s[4]=L=>e.log.status=L),class:"form-control"},[t("option",Vt,l((Q=e.translations)==null?void 0:Q.select_status),1),(a(!0),c(f,null,C(e.review_statuses,(L,N)=>(a(),c("option",{value:N},l(L),9,Ct))),256))],512),[[A,e.log.status]])])])])])])])])])]}),_:1},8,["heading"])}const Ft=W(ye,[["render",Ut]]),Rt={name:"Logs",components:{WpHead:_e,TableLite:ue,flatPickr:ge},async mounted(){this.$route.query.order_by&&this.$route.query.sort&&(this.table.sortable.order=this.$route.query.order_by,this.table.sortable.sort=this.$route.query.sort,this.order_by(this.$route.query.order_by,this.$route.query.sort)),this.$route.query.page&&await this.pagination(this.$route.query.page);let o=[],s=await localStorage.getItem("cbxmcratingreview_log_list");s&&(s=JSON.parse(s),Array.isArray(s)&&s.length&&(o=s)),Array.isArray(o)&&o.length===0&&(o=["id","form","post","user","score","headline","status","date_created","action"]),this.table_col_show=o,this.table.columns=await this.set_table_columns(),await this.doSearch(0,this.limit,this.table.sortable.order,this.table.sortable.sort)},watch:{table_col_show:{deep:!0,handler(o){localStorage.setItem("cbxmcratingreview_log_list",JSON.stringify(o)),this.table.columns=this.set_table_columns()}}},data(){var o;return{cbxmcratingreview_vue_var,cbx_table_lite:cbxmcratingreview_vue_var.cbx_table_lite,logs:[],table_col_show:[],dataLoading:!1,table:{isLoading:!1,columns:[],rows:[],sortable:{order:"id",sort:"desc"}},filterStatus:"",filterForm:"",selectedRows:[],total_count:0,dateFilter:null,flatPickerConf:{mode:"range",dateFormat:"Y-m-d"},review_statuses:cbxmcratingreview_vue_var.review_statuses,filterPostId:(o=this.$route.query)==null?void 0:o.post_id}},methods:{clearFilter(){this.searchText="",this.filterForm="",this.filterStatus="",this.dateFilter=null,this.filterPostId=null,this.search()},search(){let o=new URLSearchParams(this.queryStr);this.searchText?o.set("search",this.searchText):o.delete("search"),this.filterForm?o.set("form",this.filterForm):o.delete("form"),this.filterStatus?o.set("status",this.filterStatus):o.delete("status"),this.dateFilter?o.set("date",this.dateFilter):o.delete("date"),this.queryStr=o.toString(),this.doSearch(0,this.limit,this.table.sortable.order,this.table.sortable.sort)},set_table_columns(){let o=this.table_col_show;return[{label:cbxmcratingreview_vue_var.translations.id,field:"id",sortable:!0,isKey:!0,is_show:o.includes("id")},{label:cbxmcratingreview_vue_var.translations.form,field:"form_id",sortable:!1,is_show:o.includes("form")},{label:cbxmcratingreview_vue_var.translations.post,field:"post",sortable:!1,is_show:o.includes("post")},{label:cbxmcratingreview_vue_var.translations.score,field:"score",sortable:!1,is_show:o.includes("score")},{label:cbxmcratingreview_vue_var.translations.headline,field:"headline",sortable:!1,is_show:o.includes("headline")},{label:cbxmcratingreview_vue_var.translations.comment,field:"comment",sortable:!1,is_show:o.includes("comment")},{label:cbxmcratingreview_vue_var.translations.status,field:"status",sortable:!1,is_show:o.includes("status")},{label:cbxmcratingreview_vue_var.translations.user,field:"user.display_name",sortable:!1,is_show:o.includes("user")},{label:cbxmcratingreview_vue_var.translations.date,field:"formatted_create_date",sortable:!1,is_show:o.includes("date_created")},{label:cbxmcratingreview_vue_var.translations.action,field:"action",sortable:!1,is_show:o.includes("action")}]},async doSearch(o,s,n,m,e=1){this.table.isLoading=!0,this.limit=s,this.dataLoading=!0,this.table.sortable.order=n,this.table.sortable.sort=m,await this.pagination(e),await this.order_by(this.table.sortable.order,this.table.sortable.sort),this.$router.push("/?"+this.queryStr),await this.axios.get(this.cbxmcratingreview_vue_var.rest_end_points.get_log_list+"?"+this.queryStr).then(r=>{var d,k,q,F,U,S,i,p,M,T,B,I,E;(d=r==null?void 0:r.data)!=null&&d.success?(this.total_count=(q=(k=r==null?void 0:r.data)==null?void 0:k.data)==null?void 0:q.total,this.table.rows=(U=(F=r==null?void 0:r.data)==null?void 0:F.data)==null?void 0:U.data,this.logs=(i=(S=r==null?void 0:r.data)==null?void 0:S.data)==null?void 0:i.data,(M=(p=r==null?void 0:r.data)==null?void 0:p.data)==null||delete M.data,this.paginationInfo=(T=r==null?void 0:r.data)==null?void 0:T.data,this.table.totalRecordCount=(B=this.paginationInfo)==null?void 0:B.total):((I=r==null?void 0:r.data)!=null&&I.info&&this.errorMessage((E=r==null?void 0:r.data)==null?void 0:E.info),this.paginationInfo={},this.table.rows=[]),this.table.isLoading=!1,this.dataLoading=!1})},pagination(o){let s=new URLSearchParams(this.queryStr);o?s.set("page",o):s.delete("page"),this.filterPostId?s.set("post_id",this.filterPostId):s.delete("post_id"),this.limit?s.set("limit",this.limit):s.delete("limit"),this.queryStr=s.toString()},async order_by(o,s){let n=new URLSearchParams(this.queryStr);this.queryStr=n.toString(),o?n.set("order_by",o):n.delete("order_by"),s?n.set("sort",s):n.delete("sort"),this.queryStr=n.toString()},checkedRows(o){this.selectedRows=o.map(s=>Number(s))},deleteLog(o){Z.fire({title:this.cbxmcratingreview_vue_var.translations.delete_confirmation_title,text:this.cbxmcratingreview_vue_var.translations.delete_confirmation_txt,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",customClass:{container:"swal2-container-cbx"},confirmButtonText:this.cbxmcratingreview_vue_var.translations.delete_btn_txt}).then(s=>{s.isConfirmed&&this.axios.post(this.cbxmcratingreview_vue_var.rest_end_points.delete_log,{id:o}).then(n=>{var m,e,r;if((m=n==null?void 0:n.data)!=null&&m.success){this.successToast((e=n==null?void 0:n.data)==null?void 0:e.info),this.selectedRows=[];const d=document.querySelectorAll(".vtl-tbody-checkbox");typeof d<"u"&&d&&d.forEach(k=>{k.checked=!1}),document.querySelector(".vtl-thead-checkbox").checked=!1,this.doSearch(0,this.limit,this.table.sortable.order,this.table.sortable.sort)}else this.errorMessage((r=n==null?void 0:n.data)==null?void 0:r.error)})})},deleteSelectedItems(){Z.fire({title:cbxmcratingreview_vue_var.translations.delete_confirmation_title,text:cbxmcratingreview_vue_var.translations.delete_confirmation_txt,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:cbxmcratingreview_vue_var.translations.delete_btn_txt,customClass:{container:"swal2-container-cbx"}}).then(o=>{o.isConfirmed&&this.axios.post(cbxmcratingreview_vue_var.rest_end_points.delete_log+"?id="+this.selectedRows.join(",")).then(s=>{var n,m,e;if((n=s==null?void 0:s.data)!=null&&n.success){this.successMessage((m=s==null?void 0:s.data)==null?void 0:m.info),this.selectedRows=[];const r=document.querySelectorAll(".vtl-tbody-checkbox");typeof r<"u"&&r&&r.forEach(d=>{d.checked=!1}),document.querySelector(".vtl-thead-checkbox").checked=!1,this.doSearch(0,this.limit,this.table.sortable.order,this.table.sortable.sort)}else this.errorMessage((e=s==null?void 0:s.data)==null?void 0:e.error)}).catch(s=>{this.errorMessage(s)})})}}},Mt={class:"inside"},Tt={class:"container"},Bt={class:"row"},It={class:"col-12"},Et={class:"cbx-sub-heading-wrap",id:"dashlisting_toolbar"},Nt={class:"cbx-sub-heading-l"},Pt={class:"cbx-sub-heading cbx-sub-heading-log cbx-sub-heading-logs"},At={class:"cbx-listing-table-filters-wrap cbx-listing-table-filters-wrap-log cbx-listing-table-filters-wrap-logs"},Dt={class:"container"},Ht={class:"row"},zt={class:"col-12"},Wt={class:"cbx-listing-table-filters"},Qt={class:"cbx-listing-table-filter"},Kt={value:""},jt=["value"],Jt={class:"cbx-listing-table-filter"},Ot={value:""},Gt=["value"],Xt={class:"cbx-listing-table-prebox-wrap cbx-listing-table-prebox-wrap-form cbx-listing-table-prebox-wrap-loglist"},Yt={class:"container"},Zt={class:"row"},$t={class:"col col-12"},es={class:"cbx-listing-table-prebox-l pull-left"},ts=["title"],ss={class:"cbx-icon"},os={class:"button-label"},is={class:"sr-only"},ls={class:"cbx-listing-table-prebox-r pull-right"},rs=["placeholder"],ns=["title"],as={key:0,class:"cbx-icon"},cs={key:1,class:"cbx-icon cbx-icon-refresh-white"},_s={class:"sr-only"},us=["title"],ds={class:"cbx-icon"},hs={class:"sr-only"},bs={class:"dropdown dropdown-menu ml-10"},ms=["title","aria-label"],vs={class:"cbx-icon"},gs={class:"sr-only"},ps={class:"card card-menu card-menu-right"},fs={class:"checkbox_field"},ws={for:"id"},xs={class:"mt-5"},ys={class:"checkbox_field"},ks={for:"form"},qs={class:"mt-5"},Ss={class:"checkbox_field"},Ls={for:"post"},Vs={class:"mt-5"},Cs={class:"checkbox_field"},Us={for:"score"},Fs={class:"mt-5"},Rs={class:"checkbox_field"},Ms={for:"headline"},Ts={class:"mt-5"},Bs={class:"checkbox_field"},Is={for:"comment"},Es={class:"mt-5"},Ns={class:"checkbox_field"},Ps={for:"user"},As={class:"mt-5"},Ds={class:"checkbox_field"},Hs={for:"status"},zs={class:"mt-5"},Ws={class:"checkbox_field"},Qs={for:"action"},Ks={class:"container"},js=["innerHTML"],Js=["href"],Os={class:"button_actions"},Gs={class:"cbx-icon"},Xs={class:"button-label"},Ys={class:"sr-only"},Zs=["onClick","title"],$s={class:"cbx-icon"},eo={class:"sr-only"};function to(o,s,n,m,e,r){const d=y("inline-svg"),k=y("router-link"),q=y("table-lite"),F=y("wp-head");return a(),P(F,{heading:e.cbxmcratingreview_vue_var.translations.app_heading,"class-name":"cbxmcratingreview-page-log cbxmcratingreview-page-listing"},{default:V(()=>{var U,S;return[t("div",Mt,[t("div",Tt,[t("div",Bt,[t("div",It,[t("div",Et,[t("div",Nt,[t("h2",Pt,l(e.cbxmcratingreview_vue_var.translations.logs),1)]),s[17]||(s[17]=t("div",{class:"cbx-sub-heading-r"},null,-1))])])])]),t("div",At,[t("div",Dt,[t("div",Ht,[t("div",zt,[t("div",Wt,[t("div",Qt,[h(t("select",{"onUpdate:modelValue":s[0]||(s[0]=i=>e.filterStatus=i),class:"form-control"},[t("option",Kt,l((U=e.cbxmcratingreview_vue_var.translations)==null?void 0:U.select_status),1),(a(!0),c(f,null,C(e.review_statuses,(i,p)=>(a(),c("option",{value:p},l(i),9,jt))),256))],512),[[A,e.filterStatus]])]),t("div",Jt,[h(t("select",{"onUpdate:modelValue":s[1]||(s[1]=i=>e.filterForm=i),class:"form-control"},[t("option",Ot,l((S=e.cbxmcratingreview_vue_var.translations)==null?void 0:S.select_form),1),(a(!0),c(f,null,C(e.cbxmcratingreview_vue_var.form_list,(i,p)=>(a(),c("option",{value:p},l(i),9,Gt))),256))],512),[[A,e.filterForm]])])])])])])]),t("div",Xt,[t("div",Yt,[t("div",Zt,[t("div",$t,[t("div",es,[t("h3",null,l(e.cbxmcratingreview_vue_var.translations.total)+": "+l(e.total_count),1),e.selectedRows.length>0?(a(),c("button",{key:0,role:"button",class:"button error icon icon-inline ml-10",onClick:s[2]||(s[2]=i=>r.deleteLog(e.selectedRows)),title:e.cbxmcratingreview_vue_var.translations.delete_all},[t("i",ss,[x(d,{src:e.cbxmcratingreview_vue_var.icons_url+"icon_delete.svg"},null,8,["src"])]),t("span",os,l(e.cbxmcratingreview_vue_var.translations.delete_all)+" ("+l(e.selectedRows.length)+")",1),t("span",is,l(e.cbxmcratingreview_vue_var.translations.buttons.delete.sr_label),1)],8,ts)):v("",!0)]),t("div",ls,[h(t("input",{style:{display:"inline-block","margin-right":"10px"},type:"text",class:"form-control",placeholder:e.cbxmcratingreview_vue_var.translations.search_text,"onUpdate:modelValue":s[3]||(s[3]=i=>o.searchText=i),onKeyup:s[4]||(s[4]=se((...i)=>r.search&&r.search(...i),["enter"]))},null,40,rs),[[R,o.searchText]]),t("button",{role:"button",class:"button primary icon icon-only icon-inline",onClick:s[5]||(s[5]=(...i)=>r.search&&r.search(...i)),title:e.cbxmcratingreview_vue_var.translations.buttons.search.title},[e.dataLoading?(a(),c("i",cs)):(a(),c("i",as,[x(d,{src:e.cbxmcratingreview_vue_var.icons_url+"icon_search.svg"},null,8,["src"])])),t("span",_s,l(e.cbxmcratingreview_vue_var.translations.buttons.search.sr_label),1)],8,ns),t("button",{role:"button",class:"button secondary icon icon-only icon-inline",onClick:s[6]||(s[6]=(...i)=>r.clearFilter&&r.clearFilter(...i)),title:e.cbxmcratingreview_vue_var.translations.buttons.reset.title},[t("i",ds,[x(d,{src:e.cbxmcratingreview_vue_var.icons_url+"icon_reset.svg"},null,8,["src"])]),t("span",hs,l(e.cbxmcratingreview_vue_var.translations.buttons.reset.sr_label),1)],8,us),t("details",bs,[t("summary",{class:"button outline primary icon icon-only",title:e.cbxmcratingreview_vue_var.translations.buttons.filter.title,"aria-label":e.cbxmcratingreview_vue_var.translations.buttons.filter.title},[t("i",vs,[x(d,{src:e.cbxmcratingreview_vue_var.icons_url+"icon_funnel.svg"},null,8,["src"])]),t("span",gs,l(e.cbxmcratingreview_vue_var.translations.buttons.filter.sr_label),1)],8,ms),t("div",ps,[t("ul",null,[t("li",null,[t("div",fs,[h(t("input",{type:"checkbox",class:"magic-checkbox",id:"id",value:"id","onUpdate:modelValue":s[7]||(s[7]=i=>e.table_col_show=i)},null,512),[[w,e.table_col_show]]),t("label",ws,l(e.cbxmcratingreview_vue_var.translations.id),1)])]),t("li",xs,[t("div",ys,[h(t("input",{type:"checkbox",class:"magic-checkbox",id:"form","onUpdate:modelValue":s[8]||(s[8]=i=>e.table_col_show=i),value:"form"},null,512),[[w,e.table_col_show]]),t("label",ks,l(e.cbxmcratingreview_vue_var.translations.form),1)])]),t("li",qs,[t("div",Ss,[h(t("input",{type:"checkbox",class:"magic-checkbox",id:"post","onUpdate:modelValue":s[9]||(s[9]=i=>e.table_col_show=i),value:"post"},null,512),[[w,e.table_col_show]]),t("label",Ls,l(e.cbxmcratingreview_vue_var.translations.post),1)])]),t("li",Vs,[t("div",Cs,[h(t("input",{type:"checkbox",class:"magic-checkbox",id:"score","onUpdate:modelValue":s[10]||(s[10]=i=>e.table_col_show=i),value:"score"},null,512),[[w,e.table_col_show]]),t("label",Us,l(e.cbxmcratingreview_vue_var.translations.score),1)])]),t("li",Fs,[t("div",Rs,[h(t("input",{type:"checkbox",class:"magic-checkbox",id:"headline","onUpdate:modelValue":s[11]||(s[11]=i=>e.table_col_show=i),value:"headline"},null,512),[[w,e.table_col_show]]),t("label",Ms,l(e.cbxmcratingreview_vue_var.translations.headline),1)])]),t("li",Ts,[t("div",Bs,[h(t("input",{type:"checkbox",class:"magic-checkbox",id:"comment","onUpdate:modelValue":s[12]||(s[12]=i=>e.table_col_show=i),value:"comment"},null,512),[[w,e.table_col_show]]),t("label",Is,l(e.cbxmcratingreview_vue_var.translations.comment),1)])]),t("li",Es,[t("div",Ns,[h(t("input",{type:"checkbox",class:"magic-checkbox",id:"user","onUpdate:modelValue":s[13]||(s[13]=i=>e.table_col_show=i),value:"user"},null,512),[[w,e.table_col_show]]),t("label",Ps,l(e.cbxmcratingreview_vue_var.translations.user),1)])]),t("li",As,[t("div",Ds,[h(t("input",{type:"checkbox",class:"magic-checkbox",id:"status","onUpdate:modelValue":s[14]||(s[14]=i=>e.table_col_show=i),value:"status"},null,512),[[w,e.table_col_show]]),t("label",Hs,l(e.cbxmcratingreview_vue_var.translations.status),1)])]),t("li",zs,[t("div",Ws,[h(t("input",{type:"checkbox",class:"magic-checkbox",id:"action","onUpdate:modelValue":s[15]||(s[15]=i=>e.table_col_show=i),value:"action",disabled:""},null,512),[[w,e.table_col_show]]),t("label",Qs,l(e.cbxmcratingreview_vue_var.translations.action),1)])])])])])])])])])]),t("div",Ks,[x(q,{translations:e.cbx_table_lite,messages:{pagingInfo:e.cbxmcratingreview_vue_var.translations.showing+" {0}-{1} "+e.cbxmcratingreview_vue_var.translations.of+" {2}",pageSizeChangeLabel:e.cbxmcratingreview_vue_var.translations.rowCount,gotoPageLabel:"     "+e.cbxmcratingreview_vue_var.translations.goTo,noDataAvailable:e.cbxmcratingreview_vue_var.translations.no_log_found},class:"cbx-listing-table cbx-listing-table-form mt-0","is-slot-mode":!0,"is-loading":e.table.isLoading,columns:e.table.columns,rows:e.logs,total:e.table.totalRecordCount,sortable:e.table.sortable,"page-size":o.limit,"has-checkbox":!0,onDoSearch:r.doSearch,onIsFinished:s[16]||(s[16]=i=>e.table.isLoading=!1),onReturnCheckedRows:r.checkedRows},{comment:V(i=>[t("div",{innerHTML:i.value.comment.length>100?i.value.comment.substring(0,100)+"...":i.value.comment},null,8,js)]),post:V(i=>[t("a",{href:i.value.permalink,target:"_blank"},l(i.value.post.post_title),9,Js)]),status:V(i=>{var p;return[t("span",{class:z("component_status component_status_icon component_status_log component_status_"+((p=i.value)==null?void 0:p.status))},[s[18]||(s[18]=t("span",{class:"dot"},null,-1)),t("span",null,l(e.review_statuses[i.value.status]?e.review_statuses[i.value.status]:""),1)],2)]}),action:V(i=>[t("div",Os,[x(k,{role:"button",to:"log/"+i.value.id,class:"button primary icon icon-only icon-inline small",title:e.cbxmcratingreview_vue_var.translations.buttons.edit.sr_label},{default:V(()=>[t("i",Gs,[x(d,{src:e.cbxmcratingreview_vue_var.icons_url+"icon_edit.svg"},null,8,["src"])]),t("span",Xs,l(e.cbxmcratingreview_vue_var.translations.view),1),t("span",Ys,l(e.cbxmcratingreview_vue_var.translations.buttons.view.sr_label),1)]),_:2},1032,["to","title"]),t("button",{role:"button",class:"button error icon icon-only icon-inline small",onClick:p=>r.deleteLog(i.value.id),title:e.cbxmcratingreview_vue_var.translations.buttons.delete.title},[t("i",$s,[x(d,{src:e.cbxmcratingreview_vue_var.icons_url+"icon_delete.svg"},null,8,["src"])]),t("span",eo,l(e.cbxmcratingreview_vue_var.translations.buttons.delete.sr_label),1)],8,Zs)])]),_:1},8,["translations","messages","is-loading","columns","rows","total","sortable","page-size","onDoSearch","onReturnCheckedRows"])])])]}),_:1},8,["heading"])}const so=W(Rt,[["render",to]]),oo={name:"EditLog",components:{Log:Ft},data(){return{log_id:Number(this.$route.params.id)}}};function io(o,s,n,m,e,r){const d=y("Log");return a(),P(d,{log_id:e.log_id},null,8,["log_id"])}const lo=W(oo,[["render",io]]),ro=oe(),no=ie({history:ro,routes:[{path:"/log/:id",component:lo},{path:"/",component:so}]});D("required",o=>!!o||"This field is required.");D("email",o=>/.+@.+\..+/.test(o)||"Must be a valid email.");D("minValue",(o,[s])=>parseFloat(o)>=parseFloat(s)||`The value must be at least ${s}.`);D("maxValue",(o,[s])=>parseFloat(o)<=parseFloat(s)||`The value must be no more than ${s}.`);$.defaults.headers.common["X-WP-Nonce"]=cbxmcratingreview_vue_var.rest_nonce;const ao=le(ce).use(de).use(he({key:"$vfm",componentName:"VueFinalModal",dynamicContainerName:"ModalsContainer"})).use(re,$).use(ne).use(no).component("inline-svg",ae).component("QuillEditor",be).component("Form",fe).component("Field",we).component("ErrorMessage",xe);ao.mount("#cbxmcratingreview-log-list");
