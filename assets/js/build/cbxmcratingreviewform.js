import{_ as Ne,S as ss,r as A,o as p,c as Oe,w as N,a as l,t as u,b as S,d as $,e as E,v as ti,f,g as L,h as H,i as Ai,j as ee,n as Q,k as Bi,l as Pe,m as Fe,p as te,q as Ui,s as Pi,u as Fi,F as O,x as K,y as _e,z as B,A as Mi,B as Hi,C as si,D as Ii,E as Ri,H as Gi,I as Di,G as ji}from"./vue-router.js";import{W as Qi,T as zi,d as Ji,v as Ki,Q as Yi}from"./cbxmcratingreview-head.js";import{C as Xi}from"./component.js";import{W as Zi}from"./cbxmcratingreview-head-alt.js";import{d as he,F as $i,a as eo,E as to}from"./vee-validate.js";const so={name:"Forms",components:{WpHead:Qi,TableLite:zi,flatPickr:Xi},async mounted(){this.$route.query.order_by&&this.$route.query.sort&&(this.table.sortable.order=this.$route.query.order_by,this.table.sortable.sort=this.$route.query.sort,this.order_by(this.$route.query.order_by,this.$route.query.sort)),await this.doSearch(0,this.limit,this.table.sortable.order,this.table.sortable.sort);let e=[],t=await localStorage.getItem("cbxmcratingreview_form_list");t&&(t=JSON.parse(t),Array.isArray(t)&&t.length&&(e=t)),Array.isArray(e)&&e.length===0&&(e=["id","name","status","post_types","auto_integration","action"]),this.table_col_show=e,this.table.columns=await this.set_table_columns()},watch:{table_col_show:{deep:!0,handler(e){localStorage.setItem("cbxmcratingreview_form_list",JSON.stringify(e)),this.table.columns=this.set_table_columns()}}},data(){return{cbxmcratingreview_vue_var,cbx_table_lite:cbxmcratingreview_vue_var.cbx_table_lite,forms:[],formProp:{},table_col_show:[],dataLoading:!1,table:{isLoading:!1,columns:[],rows:[],sortable:{order:"id",sort:"desc"}},filterStatus:"",selectedRows:[],total_count:0,translations:cbxmcratingreview_vue_var.translations,post_types:cbxmcratingreview_vue_var.post_types}},methods:{clearFilter(){this.searchText=null,this.filterStatus=null,this.dateFilter=null,this.search()},search(){let e=new URLSearchParams(this.queryStr);this.searchText?e.set("search",this.searchText):e.delete("search"),this.filterStatus?e.set("status",this.filterStatus):e.delete("status"),this.queryStr=e.toString(),this.doSearch(0,this.limit,this.table.sortable.order,this.table.sortable.sort)},set_table_columns(){let e=this.table_col_show;return[{label:cbxmcratingreview_vue_var.translations.id,field:"id",sortable:!0,isKey:!0,is_show:e.includes("id")},{label:cbxmcratingreview_vue_var.translations.name,field:"name",sortable:!1,is_show:e.includes("name")},{label:cbxmcratingreview_vue_var.translations.status,field:"status",sortable:!0,is_show:e.includes("status")},{label:cbxmcratingreview_vue_var.translations.post_types,field:"post_types",sortable:!0,is_show:e.includes("post_types")},{label:cbxmcratingreview_vue_var.translations.auto_integration,field:"auto_integration",sortable:!0,is_show:e.includes("auto_integration")},{label:cbxmcratingreview_vue_var.translations.action,field:"action",sortable:!1,is_show:e.includes("action")}]},async doSearch(e,t,i,o,s=1){this.table.isLoading=!0,this.limit=t,this.dataLoading=!0,this.table.sortable.order=i,this.table.sortable.sort=o,await this.pagination(s),await this.order_by(this.table.sortable.order,this.table.sortable.sort),this.$router.push("/?"+this.queryStr),await this.axios.get(this.cbxmcratingreview_vue_var.rest_end_points.get_form_list+"?"+this.queryStr).then(a=>{var _,g,x,C,b,y,m,n,v,T,w,W,U;(_=a==null?void 0:a.data)!=null&&_.success?(this.total_count=(x=(g=a==null?void 0:a.data)==null?void 0:g.data)==null?void 0:x.total,this.table.rows=(b=(C=a==null?void 0:a.data)==null?void 0:C.data)==null?void 0:b.data,this.forms=(m=(y=a==null?void 0:a.data)==null?void 0:y.data)==null?void 0:m.data,(v=(n=a==null?void 0:a.data)==null?void 0:n.data)==null||delete v.data,this.paginationInfo=(T=a==null?void 0:a.data)==null?void 0:T.data,this.table.totalRecordCount=(w=this.paginationInfo)==null?void 0:w.total):((W=a==null?void 0:a.data)!=null&&W.info&&this.errorMessage((U=a==null?void 0:a.data)==null?void 0:U.info),this.paginationInfo={},this.table.rows=[]),this.table.isLoading=!1,this.dataLoading=!1})},pagination(e){let t=new URLSearchParams(this.queryStr);e?t.set("page",e):t.delete("page"),this.limit?t.set("limit",this.limit):t.delete("limit"),this.queryStr=t.toString()},async order_by(e,t){let i=new URLSearchParams(this.queryStr);this.queryStr=i.toString(),e?i.set("order_by",e):i.delete("order_by"),t?i.set("sort",t):i.delete("sort"),this.queryStr=i.toString()},checkedRows(e){this.selectedRows=e.map(t=>Number(t))},deleteForm(e){ss.fire({title:this.cbxmcratingreview_vue_var.translations.delete_confirmation_title,text:this.cbxmcratingreview_vue_var.translations.delete_confirmation_txt,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",customClass:{container:"swal2-container-cbx"},confirmButtonText:this.cbxmcratingreview_vue_var.translations.delete_btn_txt}).then(t=>{t.isConfirmed&&this.axios.post(this.cbxmcratingreview_vue_var.rest_end_points.delete_form,{id:e}).then(i=>{var o,s,a;if((o=i==null?void 0:i.data)!=null&&o.success){this.successToast((s=i==null?void 0:i.data)==null?void 0:s.info),this.selectedRows=[];const _=document.querySelectorAll(".vtl-tbody-checkbox");typeof _<"u"&&_&&_.forEach(g=>{g.checked=!1}),document.querySelector(".vtl-thead-checkbox").checked=!1,this.doSearch(0,this.limit,this.table.sortable.order,this.table.sortable.sort)}else this.errorMessage((a=i==null?void 0:i.data)==null?void 0:a.error)})})},deleteSelectedItems(){ss.fire({title:cbxmcratingreview_vue_var.translations.delete_confirmation_title,text:cbxmcratingreview_vue_var.translations.delete_confirmation_txt,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:cbxmcratingreview_vue_var.translations.delete_btn_txt,customClass:{container:"swal2-container-cbx"}}).then(e=>{e.isConfirmed&&this.axios.post(cbxmcratingreview_vue_var.rest_end_points.delete_form+"?id="+this.selectedRows.join(",")).then(t=>{var i,o,s;if((i=t==null?void 0:t.data)!=null&&i.success){this.successMessage((o=t==null?void 0:t.data)==null?void 0:o.info),this.selectedRows=[];const a=document.querySelectorAll(".vtl-tbody-checkbox");typeof a<"u"&&a&&a.forEach(_=>{_.checked=!1}),document.querySelector(".vtl-thead-checkbox").checked=!1,this.doSearch(0,this.limit,this.table.sortable.order,this.table.sortable.sort)}else this.errorMessage((s=t==null?void 0:t.data)==null?void 0:s.error)}).catch(t=>{this.errorMessage(t)})})},postTypesText(e){return e.map(i=>this.post_types[i]).join(",")}}},io={class:"inside"},oo={class:"container"},lo={class:"row"},no={class:"col-12"},ao={class:"cbx-sub-heading-wrap",id:"dashlisting_toolbar"},ro={class:"cbx-sub-heading-l"},co={class:"cbx-sub-heading cbx-sub-heading-form cbx-sub-heading-forms"},uo={class:"cbx-sub-heading-r"},ho={class:"cbx-listing-table-filters-wrap cbx-listing-table-filters-wrap-form cbx-listing-table-filters-wrap-forms"},mo={class:"container"},_o={class:"row"},po={class:"col-12"},bo={class:"cbx-listing-table-filters"},vo={class:"cbx-listing-table-filter"},fo={value:""},go={value:"1"},wo={value:"0"},yo={class:"cbx-listing-table-prebox-wrap cbx-listing-table-prebox-wrap-form cbx-listing-table-prebox-wrap-formlist"},ko={class:"container"},Co={class:"row"},xo={class:"col col-12"},So={class:"cbx-listing-table-prebox-l pull-left"},Eo=["title"],qo={class:"cbx-icon"},Lo={class:"button-label"},To={class:"sr-only"},Vo={class:"cbx-listing-table-prebox-r pull-right"},Wo=["placeholder"],No=["title"],Oo={key:0,class:"cbx-icon"},Ao={key:1,class:"cbx-icon cbx-icon-refresh-white"},Bo={class:"sr-only"},Uo=["title"],Po={class:"cbx-icon"},Fo={class:"sr-only"},Mo={class:"dropdown dropdown-menu ml-10"},Ho=["title","aria-label"],Io={class:"cbx-icon"},Ro={class:"sr-only"},Go={class:"card card-menu card-menu-right"},Do={class:"checkbox_field"},jo={for:"id"},Qo={class:"mt-5"},zo={class:"checkbox_field"},Jo={for:"name"},Ko={class:"mt-5"},Yo={class:"checkbox_field"},Xo={for:"status"},Zo={class:"mt-5"},$o={class:"checkbox_field"},el={for:"post_types"},tl={class:"mt-5"},sl={class:"checkbox_field"},il={for:"auto_integration"},ol={class:"mt-5"},ll={class:"checkbox_field"},nl={for:"action"},al={class:"container"},rl={class:"button_actions"},cl={class:"cbx-icon"},dl={class:"button-label"},ul={class:"sr-only"},hl=["onClick","title"],ml={class:"cbx-icon"},_l={class:"sr-only"};function pl(e,t,i,o,s,a){const _=A("router-link"),g=A("inline-svg"),x=A("table-lite"),C=A("wp-head");return p(),Oe(C,{heading:s.translations.form_manager,"class-name":"cbxmcratingreview-page-form cbxmcratingreview-page-listing"},{default:N(()=>{var b,y,m;return[l("div",io,[l("div",oo,[l("div",lo,[l("div",no,[l("div",ao,[l("div",ro,[l("h2",co,u(s.translations.forms),1)]),l("div",uo,[S(_,{to:"form/create",class:"button primary ml-10"},{default:N(()=>{var n;return[$(u((n=s.cbxmcratingreview_vue_var)==null?void 0:n.translations.add_new),1)]}),_:1})])])])])]),l("div",ho,[l("div",mo,[l("div",_o,[l("div",po,[l("div",bo,[l("div",vo,[E(l("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>s.filterStatus=n),class:"form-control"},[l("option",fo,u((b=s.translations)==null?void 0:b.select_status),1),l("option",go,u((y=s.translations)==null?void 0:y.enabled),1),l("option",wo,u((m=s.translations)==null?void 0:m.disabled),1)],512),[[ti,s.filterStatus]])])])])])])]),l("div",yo,[l("div",ko,[l("div",Co,[l("div",xo,[l("div",So,[l("h3",null,u(s.translations.total)+": "+u(s.total_count),1),s.selectedRows.length>0?(p(),f("button",{key:0,role:"button",class:"button error icon icon-inline ml-10",onClick:t[1]||(t[1]=n=>a.deleteForm(s.selectedRows)),title:s.translations.delete_all},[l("i",qo,[S(g,{src:s.cbxmcratingreview_vue_var.icons_url+"icon_delete.svg"},null,8,["src"])]),l("span",Lo,u(s.translations.delete_all)+" ("+u(s.selectedRows.length)+")",1),l("span",To,u(s.translations.buttons.delete.sr_label),1)],8,Eo)):L("",!0)]),l("div",Vo,[E(l("input",{style:{display:"inline-block","margin-right":"10px"},type:"text",class:"form-control",placeholder:s.translations.search_text,"onUpdate:modelValue":t[2]||(t[2]=n=>e.searchText=n),onKeyup:t[3]||(t[3]=Ai((...n)=>a.search&&a.search(...n),["enter"]))},null,40,Wo),[[H,e.searchText]]),l("button",{role:"button",class:"button primary icon icon-only icon-inline",onClick:t[4]||(t[4]=(...n)=>a.search&&a.search(...n)),title:s.translations.buttons.search.title},[s.dataLoading?(p(),f("i",Ao)):(p(),f("i",Oo,[S(g,{src:s.cbxmcratingreview_vue_var.icons_url+"icon_search.svg"},null,8,["src"])])),l("span",Bo,u(s.translations.buttons.search.sr_label),1)],8,No),l("button",{role:"button",class:"button secondary icon icon-only icon-inline",onClick:t[5]||(t[5]=(...n)=>a.clearFilter&&a.clearFilter(...n)),title:s.translations.buttons.reset.title},[l("i",Po,[S(g,{src:s.cbxmcratingreview_vue_var.icons_url+"icon_reset.svg"},null,8,["src"])]),l("span",Fo,u(s.translations.buttons.reset.sr_label),1)],8,Uo),l("details",Mo,[l("summary",{class:"button outline primary icon icon-only",title:s.translations.buttons.filter.title,"aria-label":s.translations.buttons.filter.title},[l("i",Io,[S(g,{src:s.cbxmcratingreview_vue_var.icons_url+"icon_funnel.svg"},null,8,["src"])]),l("span",Ro,u(s.translations.buttons.filter.sr_label),1)],8,Ho),l("div",Go,[l("ul",null,[l("li",null,[l("div",Do,[E(l("input",{type:"checkbox",class:"magic-checkbox",id:"id",value:"id","onUpdate:modelValue":t[6]||(t[6]=n=>s.table_col_show=n)},null,512),[[ee,s.table_col_show]]),l("label",jo,u(s.translations.id),1)])]),l("li",Qo,[l("div",zo,[E(l("input",{type:"checkbox",class:"magic-checkbox",id:"name","onUpdate:modelValue":t[7]||(t[7]=n=>s.table_col_show=n),value:"name"},null,512),[[ee,s.table_col_show]]),l("label",Jo,u(s.translations.name),1)])]),l("li",Ko,[l("div",Yo,[E(l("input",{type:"checkbox",class:"magic-checkbox",id:"status","onUpdate:modelValue":t[8]||(t[8]=n=>s.table_col_show=n),value:"status"},null,512),[[ee,s.table_col_show]]),l("label",Xo,u(s.translations.status),1)])]),l("li",Zo,[l("div",$o,[E(l("input",{type:"checkbox",class:"magic-checkbox",id:"post_types","onUpdate:modelValue":t[9]||(t[9]=n=>s.table_col_show=n),value:"post_types"},null,512),[[ee,s.table_col_show]]),l("label",el,u(s.translations.post_types),1)])]),l("li",tl,[l("div",sl,[E(l("input",{type:"checkbox",class:"magic-checkbox",id:"auto_integration","onUpdate:modelValue":t[10]||(t[10]=n=>s.table_col_show=n),value:"auto_integration"},null,512),[[ee,s.table_col_show]]),l("label",il,u(s.translations.auto_integration),1)])]),l("li",ol,[l("div",ll,[E(l("input",{type:"checkbox",class:"magic-checkbox",id:"action","onUpdate:modelValue":t[11]||(t[11]=n=>s.table_col_show=n),value:"action",disabled:""},null,512),[[ee,s.table_col_show]]),l("label",nl,u(s.translations.action),1)])])])])])])])])])]),l("div",al,[S(x,{translations:s.cbx_table_lite,messages:{pagingInfo:s.translations.showing+" {0}-{1} "+s.translations.of+" {2}",pageSizeChangeLabel:s.translations.rowCount,gotoPageLabel:"     "+s.translations.goTo,noDataAvailable:s.translations.no_form_found},class:"cbx-listing-table cbx-listing-table-form mt-0","is-slot-mode":!0,"is-loading":s.table.isLoading,columns:s.table.columns,rows:s.forms,total:s.table.totalRecordCount,sortable:s.table.sortable,"page-size":e.limit,"has-checkbox":!0,onDoSearch:a.doSearch,onIsFinished:t[12]||(t[12]=n=>s.table.isLoading=!1),onReturnCheckedRows:a.checkedRows},{status:N(n=>{var v;return[l("span",{class:Q("component_status component_status_icon component_status_log component_status_"+((v=n.value)==null?void 0:v.status))},[t[13]||(t[13]=l("span",{class:"dot"},null,-1)),$(" "+u(n.value.status?s.translations.enabled:s.translations.disabled),1)],2)]}),post_types:N(n=>[$(u(a.postTypesText(n.value.extrafields.post_types)),1)]),auto_integration:N(n=>[$(u(n.value.extrafields.enable_auto_integration?s.translations.enabled:s.translations.disabled),1)]),action:N(n=>[l("div",rl,[S(_,{role:"button",to:"form/"+n.value.id,class:"button primary icon icon-only icon-inline small",title:s.translations.buttons.view.sr_label},{default:N(()=>[l("i",cl,[S(g,{src:s.cbxmcratingreview_vue_var.icons_url+"icon_edit.svg"},null,8,["src"])]),l("span",dl,u(s.translations.view),1),l("span",ul,u(s.translations.buttons.view.sr_label),1)]),_:2},1032,["to","title"]),l("button",{role:"button",class:"button error icon icon-only icon-inline small",onClick:v=>a.deleteForm(n.value.id),title:s.translations.buttons.delete.title},[l("i",ml,[S(g,{src:s.cbxmcratingreview_vue_var.icons_url+"icon_delete.svg"},null,8,["src"])]),l("span",_l,u(s.translations.buttons.delete.sr_label),1)],8,hl)])]),_:1},8,["translations","messages","is-loading","columns","rows","total","sortable","page-size","onDoSearch","onReturnCheckedRows"])])])]}),_:1},8,["heading"])}const bl=Ne(so,[["render",pl]]);var vl=Object.defineProperty,fl=(e,t,i)=>t in e?vl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,h=(e,t,i)=>(fl(e,typeof t!="symbol"?t+"":t,i),i),es=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)},r=(e,t,i)=>(es(e,t,"read from private field"),i?i.call(e):t.get(e)),d=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},V=(e,t,i,o)=>(es(e,t,"write to private field"),o?o.call(e,i):t.set(e,i),i),c=(e,t,i)=>(es(e,t,"access private method"),i);const is={arrowUp:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>',arrowDown:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>',arrowRight:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>',attention:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',clear:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',cross:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',check:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',partialCheck:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>'},j=(e,t)=>{if(t.innerHTML="",typeof e=="string")t.innerHTML=e;else{const i=e.cloneNode(!0);t.appendChild(i)}},os=e=>{const t=e?{...e}:{};return Object.keys(is).forEach(i=>{t[i]||(t[i]=is[i])}),t},gl=e=>e.reduce((t,{name:i},o)=>(t+=i,o<e.length-1&&(t+=", "),t),"");var z,M,le,F,je,ii,se,ce,Qe,ls,ze,ns,ie,de,J,X,Je,oi,Ke,as,Ye,li,Xe,rs,Ze,cs,$e,ds,et,us,tt,hs,st,ni,it,ms,ot,_s,lt,ai,nt,ps,at,bs,rt,vs,ct,fs,be,dt;class wl{constructor({value:t,showTags:i,tagsCountText:o,clearable:s,isAlwaysOpened:a,searchable:_,placeholder:g,disabled:x,isSingleSelect:C,id:b,ariaLabel:y,iconElements:m,inputCallback:n,searchCallback:v,openCallback:T,closeCallback:w,keydownCallback:W,focusCallback:U,blurCallback:Ue,nameChangeCallback:me}){d(this,je),d(this,se),d(this,Qe),d(this,ze),d(this,ie),d(this,J),d(this,Je),d(this,Ke),d(this,Ye),d(this,Xe),d(this,Ze),d(this,$e),d(this,et),d(this,tt),d(this,st),d(this,it),d(this,ot),d(this,lt),d(this,nt),d(this,at),d(this,rt),d(this,ct),d(this,be),h(this,"value"),h(this,"showTags"),h(this,"tagsCountText"),h(this,"clearable"),h(this,"isAlwaysOpened"),h(this,"searchable"),h(this,"placeholder"),h(this,"disabled"),h(this,"isSingleSelect"),h(this,"id"),h(this,"ariaLabel"),h(this,"iconElements"),h(this,"isOpened"),h(this,"searchText"),h(this,"srcElement"),d(this,z,void 0),d(this,M,void 0),d(this,le,void 0),d(this,F,void 0),h(this,"inputCallback"),h(this,"searchCallback"),h(this,"openCallback"),h(this,"closeCallback"),h(this,"keydownCallback"),h(this,"focusCallback"),h(this,"blurCallback"),h(this,"nameChangeCallback"),this.value=t,this.showTags=i,this.tagsCountText=o,this.searchable=_,this.placeholder=g,this.clearable=s,this.isAlwaysOpened=a,this.disabled=x,this.isSingleSelect=C,this.id=b,this.ariaLabel=y,this.iconElements=m,this.isOpened=!1,this.searchText="",V(this,z,c(this,Ye,li).call(this)),V(this,M,c(this,st,ni).call(this)),V(this,le,c(this,lt,ai).call(this)),V(this,F,null),this.inputCallback=n,this.searchCallback=v,this.openCallback=T,this.closeCallback=w,this.keydownCallback=W,this.focusCallback=U,this.blurCallback=Ue,this.nameChangeCallback=me,this.srcElement=c(this,Je,oi).call(this,r(this,z),r(this,M),r(this,le)),c(this,je,ii).call(this)}focus(){setTimeout(()=>r(this,M).focus(),0)}blur(){this.isOpened&&c(this,J,X).call(this),this.clearSearch(),r(this,M).blur()}updateValue(t){this.value=t,c(this,se,ce).call(this),c(this,ie,de).call(this)}removeItem(t){this.value=this.value.filter(i=>i.id!==t),c(this,be,dt).call(this),c(this,se,ce).call(this),c(this,ie,de).call(this)}clear(){this.value=[],c(this,be,dt).call(this),c(this,se,ce).call(this),this.clearSearch()}openClose(){c(this,J,X).call(this)}clearSearch(){this.searchText="",this.searchCallback(""),c(this,ie,de).call(this)}}z=new WeakMap,M=new WeakMap,le=new WeakMap,F=new WeakMap,je=new WeakSet,ii=function(){c(this,se,ce).call(this),c(this,ie,de).call(this),c(this,Qe,ls).call(this)},se=new WeakSet,ce=function(){if(r(this,z).innerHTML="",this.showTags){r(this,z).append(...c(this,Xe,rs).call(this));const e=gl(this.value);this.nameChangeCallback(e)}else{const e=c(this,tt,hs).call(this);r(this,z).appendChild(e),this.nameChangeCallback(e.innerText)}r(this,z).appendChild(r(this,M))},Qe=new WeakSet,ls=function(){const e=[];r(this,le).innerHTML="",this.clearable&&e.push(c(this,nt,ps).call(this)),this.isAlwaysOpened||e.push(c(this,rt,vs).call(this,this.isOpened)),e.length&&r(this,le).append(...e)},ze=new WeakSet,ns=function(){if(!this.isAlwaysOpened&&r(this,F)){const e=this.isOpened?this.iconElements.arrowUp:this.iconElements.arrowDown;j(e,r(this,F))}},ie=new WeakSet,de=function(){var e;(e=this.value)!=null&&e.length?(r(this,M).removeAttribute("placeholder"),this.srcElement.classList.remove("treeselect-input--value-not-selected")):(r(this,M).setAttribute("placeholder",this.placeholder),this.srcElement.classList.add("treeselect-input--value-not-selected")),this.searchable?this.srcElement.classList.remove("treeselect-input--unsearchable"):this.srcElement.classList.add("treeselect-input--unsearchable"),this.isSingleSelect?this.srcElement.classList.add("treeselect-input--is-single-select"):this.srcElement.classList.remove("treeselect-input--is-single-select"),r(this,M).value=this.searchText},J=new WeakSet,X=function(){this.isOpened=!this.isOpened,c(this,ze,ns).call(this),this.isOpened?this.openCallback():this.closeCallback()},Je=new WeakSet,oi=function(e,t,i){const o=document.createElement("div");return o.classList.add("treeselect-input"),o.setAttribute("tabindex","-1"),o.addEventListener("mousedown",s=>c(this,Ke,as).call(this,s)),o.addEventListener("focus",()=>this.focusCallback(),!0),o.addEventListener("blur",()=>this.blurCallback(),!0),e.appendChild(t),o.append(e,i),o},Ke=new WeakSet,as=function(e){e.stopPropagation(),this.isOpened||c(this,J,X).call(this),this.focus()},Ye=new WeakSet,li=function(){const e=document.createElement("div");return e.classList.add("treeselect-input__tags"),e},Xe=new WeakSet,rs=function(){return this.value.map(e=>{const t=document.createElement("div");t.classList.add("treeselect-input__tags-element"),t.setAttribute("tabindex","-1"),t.setAttribute("tag-id",e.id.toString()),t.setAttribute("title",e.name);const i=c(this,$e,ds).call(this,e.name),o=c(this,et,us).call(this);return t.addEventListener("mousedown",s=>c(this,Ze,cs).call(this,s,e.id)),t.append(i,o),t})},Ze=new WeakSet,cs=function(e,t){e.preventDefault(),e.stopPropagation(),this.removeItem(t),this.focus()},$e=new WeakSet,ds=function(e){const t=document.createElement("span");return t.classList.add("treeselect-input__tags-name"),t.textContent=e,t},et=new WeakSet,us=function(){const e=document.createElement("span");return e.classList.add("treeselect-input__tags-cross"),j(this.iconElements.cross,e),e},tt=new WeakSet,hs=function(){const e=document.createElement("span");if(e.classList.add("treeselect-input__tags-count"),!this.value.length)return e.textContent="",e.setAttribute("title",""),e;const t=this.value.length===1?this.value[0].name:`${this.value.length} ${this.tagsCountText}`;return e.textContent=t,e.setAttribute("title",t),e},st=new WeakSet,ni=function(){const e=document.createElement("input");return e.classList.add("treeselect-input__edit"),this.id&&e.setAttribute("id",this.id),(!this.searchable||this.disabled)&&e.setAttribute("readonly","readonly"),this.disabled&&e.setAttribute("tabindex","-1"),this.ariaLabel.length&&e.setAttribute("aria-label",this.ariaLabel),e.addEventListener("keydown",t=>c(this,it,ms).call(this,t)),e.addEventListener("input",t=>c(this,ot,_s).call(this,t,e)),e},it=new WeakSet,ms=function(e){e.stopPropagation();const t=e.key;t==="Backspace"&&!this.searchText.length&&this.value.length&&!this.showTags&&this.clear(),t==="Backspace"&&!this.searchText.length&&this.value.length&&this.removeItem(this.value[this.value.length-1].id),e.code==="Space"&&(!this.searchText||!this.searchable)&&c(this,J,X).call(this),(t==="Enter"||t==="ArrowDown"||t==="ArrowUp")&&e.preventDefault(),this.keydownCallback(e),t!=="Tab"&&this.focus()},ot=new WeakSet,_s=function(e,t){e.stopPropagation();const i=this.searchText,o=t.value.trim();if(i.length===0&&o.length===0){t.value="";return}if(this.searchable){const s=e.target.value;this.searchCallback(s),this.isOpened||c(this,J,X).call(this)}else t.value="";this.searchText=t.value},lt=new WeakSet,ai=function(){const e=document.createElement("div");return e.classList.add("treeselect-input__operators"),e},nt=new WeakSet,ps=function(){const e=document.createElement("span");return e.classList.add("treeselect-input__clear"),e.setAttribute("tabindex","-1"),j(this.iconElements.clear,e),e.addEventListener("mousedown",t=>c(this,at,bs).call(this,t)),e},at=new WeakSet,bs=function(e){e.preventDefault(),e.stopPropagation(),(this.searchText.length||this.value.length)&&this.clear(),this.focus()},rt=new WeakSet,vs=function(e){V(this,F,document.createElement("span")),r(this,F).classList.add("treeselect-input__arrow");const t=e?this.iconElements.arrowUp:this.iconElements.arrowDown;return j(t,r(this,F)),r(this,F).addEventListener("mousedown",i=>c(this,ct,fs).call(this,i)),r(this,F)},ct=new WeakSet,fs=function(e){e.stopPropagation(),e.preventDefault(),this.focus(),c(this,J,X).call(this)},be=new WeakSet,dt=function(){this.inputCallback(this.value)};const ri=(e,t,i,o)=>{xl(t);const s=t.filter(a=>!a.disabled&&e.some(_=>_===a.id));if(i&&s.length){s[0].checked=!0;return}s.forEach(a=>{a.checked=!0;const _=ts(a,t,o);a.checked=_})},ts=({id:e,checked:t},i,o)=>{const s=i.find(_=>_.id===e);if(!s)return!1;if(o)return s.checked=s.disabled?!1:!!t,s.checked;const a=ci(!!t,s,i);return di(s,i),a},ci=(e,t,i)=>{if(!t.isGroup)return t.checked=t.disabled?!1:!!e,t.isPartialChecked=!1,t.checked;const o=i.filter(s=>s.childOf===t.id);return!e||t.disabled||t.isPartialChecked?(t.checked=!1,t.isPartialChecked=!1,ut(t,o,i),t.checked):ui(o,i)?hi(o)?(t.checked=!1,t.isPartialChecked=!1,t.disabled=!0,t.checked):(t.checked=!1,t.isPartialChecked=!0,o.forEach(s=>{ci(e,s,i)}),t.checked):(t.checked=!0,t.isPartialChecked=!1,ut(t,o,i),t.checked)},di=(e,t)=>{const i=t.find(o=>o.id===e.childOf);i&&(yl(i,t),di(i,t))},yl=(e,t)=>{const i=Ae(e,t);if(hi(i)){e.checked=!1,e.isPartialChecked=!1,e.disabled=!0;return}if(kl(i)){e.checked=!0,e.isPartialChecked=!1;return}if(Cl(i)){e.checked=!1,e.isPartialChecked=!0;return}e.checked=!1,e.isPartialChecked=!1},ut=({checked:e,disabled:t},i,o)=>{i.forEach(s=>{s.disabled=!!t||!!s.disabled,s.checked=!!e&&!s.disabled,s.isPartialChecked=!1;const a=Ae(s,o);ut({checked:e,disabled:t},a,o)})},ui=(e,t)=>e.some(i=>i.disabled)?!0:e.some(i=>{if(i.isGroup){const o=Ae(i,t);return ui(o,t)}return!1}),hi=e=>e.every(t=>!!t.disabled),kl=e=>e.every(t=>!!t.checked),Cl=e=>e.some(t=>!!t.checked||!!t.isPartialChecked),xl=e=>{e.forEach(t=>{t.checked=!1,t.isPartialChecked=!1})},Sl=(e,t,i)=>{const o={level:0,groupId:""},s=mi(e,t,o.groupId,o.level);return ql(s,i)},mi=(e,t,i,o)=>e.reduce((s,a)=>{var _;const g=!!((_=a.children)!=null&&_.length),x=o>=t&&g,C=o>t;if(s.push({id:a.value,name:a.name,childOf:i,isGroup:g,checked:!1,isPartialChecked:!1,level:o,isClosed:x,hidden:C,disabled:a.disabled??!1}),g){const b=mi(a.children,t,a.value,o+1);s.push(...b)}return s},[]),Ae=({id:e},t)=>t.filter(i=>i.childOf===e),El=e=>{const{ungroupedNodes:t,allGroupedNodes:i,allNodes:o}=e.reduce((a,_)=>(_.checked&&(a.allNodes.push(_),_.isGroup?a.allGroupedNodes.push(_):a.ungroupedNodes.push(_)),a),{ungroupedNodes:[],allGroupedNodes:[],allNodes:[]}),s=o.filter(a=>!i.some(({id:_})=>_===a.childOf));return{ungroupedNodes:t,groupedNodes:s,allNodes:o}},ql=(e,t)=>(e.filter(i=>!!i.disabled).forEach(({id:i})=>ts({id:i,checked:!1},e,t)),e),Be=(e,{id:t,isClosed:i})=>{Ae({id:t},e).forEach(o=>{o.hidden=i??!1,o.isGroup&&!o.isClosed&&Be(e,{id:o.id,isClosed:i})})},Ll=e=>{e.filter(t=>t.isGroup&&!t.disabled&&(t.checked||t.isPartialChecked)).forEach(t=>{t.isClosed=!1,Be(e,t)})},Tl=(e,t)=>{const i=Vl(e,t);e.forEach(o=>{i.some(({id:s})=>s===o.id)?(o.isGroup&&(o.isClosed=!1,Be(e,o)),o.hidden=!1):o.hidden=!0})},Vl=(e,t)=>e.reduce((i,o)=>{if(o.name.toLowerCase().includes(t.toLowerCase())){if(i.push(o),o.isGroup){const s=_i(o.id,e);i.push(...s)}if(o.childOf){const s=pi(o.childOf,e);i.push(...s)}}return i},[]),_i=(e,t)=>t.reduce((i,o)=>(o.childOf===e&&(i.push(o),o.isGroup&&i.push(..._i(o.id,t))),i),[]),pi=(e,t)=>t.reduce((i,o)=>(o.id===e&&(i.push(o),o.childOf&&i.push(...pi(o.childOf,t))),i),[]),Wl=e=>{const{duplications:t}=e.reduce((i,o)=>(i.allItems.some(s=>s.toString()===o.id.toString())&&i.duplications.push(o.id),i.allItems.push(o.id),i),{duplications:[],allItems:[]});t.length&&console.error(`Validation: You have duplicated values: ${t.join(", ")}! You should use unique values.`)},Nl=(e,t,i,o,s,a,_,g,x)=>{ri(e,t,s,x),g&&_&&Ll(t),qe(t,i,o,a)},qe=(e,t,i,o)=>{e.forEach(s=>{const a=t.querySelector(`[input-id="${s.id}"]`),_=G(a);a.checked=s.checked,Ol(s,_,o),Al(s,_),Bl(s,_),Ul(s,_,i),Pl(s,_),Ml(s,_,e),Fl(s,a,i)}),Hl(e,t)},Ol=(e,t,i)=>{e.checked?t.classList.add("treeselect-list__item--checked"):t.classList.remove("treeselect-list__item--checked"),Array.isArray(i)&&i[0]===e.id&&!e.disabled?t.classList.add("treeselect-list__item--single-selected"):t.classList.remove("treeselect-list__item--single-selected")},Al=(e,t)=>{e.isPartialChecked?t.classList.add("treeselect-list__item--partial-checked"):t.classList.remove("treeselect-list__item--partial-checked")},Bl=(e,t)=>{e.disabled?t.classList.add("treeselect-list__item--disabled"):t.classList.remove("treeselect-list__item--disabled")},Ul=(e,t,i)=>{if(e.isGroup){const o=t.querySelector(".treeselect-list__item-icon"),s=e.isClosed?i.arrowRight:i.arrowDown;j(s,o),e.isClosed?t.classList.add("treeselect-list__item--closed"):t.classList.remove("treeselect-list__item--closed")}},Pl=(e,t)=>{e.hidden?t.classList.add("treeselect-list__item--hidden"):t.classList.remove("treeselect-list__item--hidden")},Fl=(e,t,i)=>{const o=t.parentNode.querySelector(".treeselect-list__item-checkbox-icon");e.checked?j(i.check,o):e.isPartialChecked?j(i.partialCheck,o):o.innerHTML=""},Ml=(e,t,i)=>{const o=e.level===0,s=20,a=5;if(o){const _=i.some(x=>x.isGroup&&x.level===e.level),g=!e.isGroup&&_?`${s}px`:`${a}px`;t.style.paddingLeft=e.isGroup?"0":g}else t.style.paddingLeft=e.isGroup?`${e.level*s}px`:`${e.level*s+s}px`;t.setAttribute("level",e.level.toString()),t.setAttribute("group",e.isGroup.toString())},Hl=(e,t)=>{const i=e.some(s=>!s.hidden),o=t.querySelector(".treeselect-list__empty");i?o.classList.add("treeselect-list__empty--hidden"):o.classList.remove("treeselect-list__empty--hidden")},G=e=>e.parentNode.parentNode,gs=(e,t)=>t.find(i=>i.id.toString()===e),Il=e=>G(e).querySelector(".treeselect-list__item-icon"),Rl=(e,t)=>{t&&Object.keys(t).forEach(i=>{const o=t[i];typeof o=="string"&&e.setAttribute(i,o)})};var oe,Z,D,ve,ht,bi,mt,vi,_t,fi,pt,ws,bt,ys,vt,ks,fe,Me,ft,Cs,gt,xs,wt,Ss,ge,He,yt,Es,kt,qs,Ct,Ls,xt,Ts,St,Vs,Et,Ws,qt,Ns,Lt,Os,Tt,As,Vt,Bs,Wt,Us,we,Ie,Le,Nt,Ot,Ps;class Gl{constructor({options:t,value:i,openLevel:o,listSlotHtmlComponent:s,emptyText:a,isSingleSelect:_,iconElements:g,showCount:x,disabledBranchNode:C,expandSelected:b,isIndependentNodes:y,inputCallback:m,arrowClickCallback:n,mouseupCallback:v}){d(this,ht),d(this,mt),d(this,_t),d(this,pt),d(this,bt),d(this,vt),d(this,fe),d(this,ft),d(this,gt),d(this,wt),d(this,ge),d(this,yt),d(this,kt),d(this,Ct),d(this,xt),d(this,St),d(this,Et),d(this,qt),d(this,Lt),d(this,Tt),d(this,Vt),d(this,Wt),d(this,we),d(this,Le),d(this,Ot),h(this,"options"),h(this,"value"),h(this,"openLevel"),h(this,"listSlotHtmlComponent"),h(this,"emptyText"),h(this,"isSingleSelect"),h(this,"showCount"),h(this,"disabledBranchNode"),h(this,"expandSelected"),h(this,"isIndependentNodes"),h(this,"iconElements"),h(this,"searchText"),h(this,"flattedOptions"),h(this,"flattedOptionsBeforeSearch"),h(this,"selectedNodes"),h(this,"srcElement"),h(this,"inputCallback"),h(this,"arrowClickCallback"),h(this,"mouseupCallback"),d(this,oe,null),d(this,Z,!0),d(this,D,[]),d(this,ve,!0),this.options=t,this.value=i,this.openLevel=o??0,this.listSlotHtmlComponent=s??null,this.emptyText=a??"No results found...",this.isSingleSelect=_??!1,this.showCount=x??!1,this.disabledBranchNode=C??!1,this.expandSelected=b??!1,this.isIndependentNodes=y??!1,this.iconElements=g,this.searchText="",this.flattedOptions=Sl(this.options,this.openLevel,this.isIndependentNodes),this.flattedOptionsBeforeSearch=this.flattedOptions,this.selectedNodes={nodes:[],groupedNodes:[],allNodes:[]},this.srcElement=c(this,_t,fi).call(this),this.inputCallback=m,this.arrowClickCallback=n,this.mouseupCallback=v,Wl(this.flattedOptions)}updateValue(t){this.value=t,V(this,D,this.isSingleSelect?this.value:[]),Nl(t,this.flattedOptions,this.srcElement,this.iconElements,this.isSingleSelect,r(this,D),this.expandSelected,r(this,ve),this.isIndependentNodes),V(this,ve,!1),c(this,Le,Nt).call(this)}updateSearchValue(t){if(t===this.searchText)return;const i=this.searchText===""&&t!=="";this.searchText=t,i&&(this.flattedOptionsBeforeSearch=JSON.parse(JSON.stringify(this.flattedOptions))),this.searchText===""&&(this.flattedOptions=this.flattedOptionsBeforeSearch.map(o=>{const s=this.flattedOptions.find(a=>a.id===o.id);return s.isClosed=o.isClosed,s.hidden=o.hidden,s}),this.flattedOptionsBeforeSearch=[]),this.searchText&&Tl(this.flattedOptions,t),qe(this.flattedOptions,this.srcElement,this.iconElements,r(this,D)),this.focusFirstListElement()}callKeyAction(t){V(this,Z,!1);const i=this.srcElement.querySelector(".treeselect-list__item--focused");if(i!=null&&i.classList.contains("treeselect-list__item--hidden"))return;const o=t.key;o==="Enter"&&i&&i.dispatchEvent(new Event("mousedown")),(o==="ArrowLeft"||o==="ArrowRight")&&c(this,ht,bi).call(this,i,t),(o==="ArrowDown"||o==="ArrowUp")&&c(this,mt,vi).call(this,i,o)}focusFirstListElement(){const t="treeselect-list__item--focused",i=this.srcElement.querySelector(`.${t}`),o=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter(s=>window.getComputedStyle(G(s)).display!=="none");o.length&&(i&&i.classList.remove(t),G(o[0]).classList.add(t))}isLastFocusedElementExist(){return!!r(this,oe)}}oe=new WeakMap,Z=new WeakMap,D=new WeakMap,ve=new WeakMap,ht=new WeakSet,bi=function(e,t){if(!e)return;const i=t.key,o=e.querySelector(".treeselect-list__item-checkbox").getAttribute("input-id"),s=gs(o,this.flattedOptions),a=e.querySelector(".treeselect-list__item-icon");i==="ArrowLeft"&&!s.isClosed&&s.isGroup&&(a.dispatchEvent(new Event("mousedown")),t.preventDefault()),i==="ArrowRight"&&s.isClosed&&s.isGroup&&(a.dispatchEvent(new Event("mousedown")),t.preventDefault())},mt=new WeakSet,vi=function(e,t){var i;const o=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter(s=>window.getComputedStyle(G(s)).display!=="none");if(o.length)if(!e)G(o[0]).classList.add("treeselect-list__item--focused");else{const s=o.findIndex(n=>G(n).classList.contains("treeselect-list__item--focused"));G(o[s]).classList.remove("treeselect-list__item--focused");const a=t==="ArrowDown"?s+1:s-1,_=t==="ArrowDown"?0:o.length-1,g=o[a]??o[_],x=!o[a],C=G(g);C.classList.add("treeselect-list__item--focused");const b=this.srcElement.getBoundingClientRect(),y=C.getBoundingClientRect();if(x&&t==="ArrowDown"){this.srcElement.scroll(0,0);return}if(x&&t==="ArrowUp"){this.srcElement.scroll(0,this.srcElement.scrollHeight);return}const m=((i=this.listSlotHtmlComponent)==null?void 0:i.clientHeight)??0;if(b.y+b.height<y.y+y.height+m){this.srcElement.scroll(0,this.srcElement.scrollTop+y.height);return}if(b.y>y.y){this.srcElement.scroll(0,this.srcElement.scrollTop-y.height);return}}},_t=new WeakSet,fi=function(){const e=c(this,pt,ws).call(this),t=c(this,fe,Me).call(this,this.options);e.append(...t);const i=c(this,gt,xs).call(this);e.append(i);const o=c(this,ft,Cs).call(this);return o&&e.append(o),e},pt=new WeakSet,ws=function(){const e=document.createElement("div");return e.classList.add("treeselect-list"),this.isSingleSelect&&e.classList.add("treeselect-list--single-select"),this.disabledBranchNode&&e.classList.add("treeselect-list--disabled-branch-node"),e.addEventListener("mouseout",t=>c(this,bt,ys).call(this,t)),e.addEventListener("mousemove",()=>c(this,vt,ks).call(this)),e.addEventListener("mouseup",()=>this.mouseupCallback(),!0),e},bt=new WeakSet,ys=function(e){e.stopPropagation(),r(this,oe)&&r(this,Z)&&r(this,oe).classList.add("treeselect-list__item--focused")},vt=new WeakSet,ks=function(){V(this,Z,!0)},fe=new WeakSet,Me=function(e){return e.reduce((t,i)=>{var o;if((o=i.children)!=null&&o.length){const a=c(this,wt,Ss).call(this,i),_=c(this,fe,Me).call(this,i.children);return a.append(..._),t.push(a),t}const s=c(this,ge,He).call(this,i,!1);return t.push(s),t},[])},ft=new WeakSet,Cs=function(){if(!this.listSlotHtmlComponent)return null;const e=document.createElement("div");return e.classList.add("treeselect-list__slot"),e.appendChild(this.listSlotHtmlComponent),e},gt=new WeakSet,xs=function(){const e=document.createElement("div");e.classList.add("treeselect-list__empty"),e.setAttribute("title",this.emptyText);const t=document.createElement("span");t.classList.add("treeselect-list__empty-icon"),j(this.iconElements.attention,t);const i=document.createElement("span");return i.classList.add("treeselect-list__empty-text"),i.textContent=this.emptyText,e.append(t,i),e},wt=new WeakSet,Ss=function(e){const t=document.createElement("div");t.setAttribute("group-container-id",e.value.toString()),t.classList.add("treeselect-list__group-container");const i=c(this,ge,He).call(this,e,!0);return t.appendChild(i),t},ge=new WeakSet,He=function(e,t){const i=c(this,yt,Es).call(this,e);if(t){const a=c(this,St,Vs).call(this);i.appendChild(a),i.classList.add("treeselect-list__item--group")}const o=c(this,qt,Ns).call(this,e),s=c(this,Lt,Os).call(this,e,t);return i.append(o,s),i},yt=new WeakSet,Es=function(e){const t=document.createElement("div");return Rl(t,e.htmlAttr),t.setAttribute("tabindex","-1"),t.setAttribute("title",e.name),t.classList.add("treeselect-list__item"),t.addEventListener("mouseover",()=>c(this,kt,qs).call(this,t),!0),t.addEventListener("mouseout",()=>c(this,Ct,Ls).call(this,t),!0),t.addEventListener("mousedown",i=>c(this,xt,Ts).call(this,i,e)),t},kt=new WeakSet,qs=function(e){r(this,Z)&&c(this,we,Ie).call(this,!0,e)},Ct=new WeakSet,Ls=function(e){r(this,Z)&&(c(this,we,Ie).call(this,!1,e),V(this,oe,e))},xt=new WeakSet,Ts=function(e,t){var i;if(e.preventDefault(),e.stopPropagation(),(i=this.flattedOptions.find(s=>s.id===t.value))==null?void 0:i.disabled)return;const o=e.target.querySelector(".treeselect-list__item-checkbox");o.checked=!o.checked,c(this,Vt,Bs).call(this,o,t)},St=new WeakSet,Vs=function(){const e=document.createElement("span");return e.setAttribute("tabindex","-1"),e.classList.add("treeselect-list__item-icon"),j(this.iconElements.arrowDown,e),e.addEventListener("mousedown",t=>c(this,Et,Ws).call(this,t)),e},Et=new WeakSet,Ws=function(e){e.preventDefault(),e.stopPropagation(),c(this,Wt,Us).call(this,e)},qt=new WeakSet,Ns=function(e){const t=document.createElement("div");t.classList.add("treeselect-list__item-checkbox-container");const i=document.createElement("span");i.classList.add("treeselect-list__item-checkbox-icon"),i.innerHTML="";const o=document.createElement("input");return o.setAttribute("tabindex","-1"),o.setAttribute("type","checkbox"),o.setAttribute("input-id",e.value.toString()),o.classList.add("treeselect-list__item-checkbox"),t.append(i,o),t},Lt=new WeakSet,Os=function(e,t){const i=document.createElement("label");if(i.textContent=e.name,i.classList.add("treeselect-list__item-label"),t&&this.showCount){const o=c(this,Tt,As).call(this,e);i.appendChild(o)}return i},Tt=new WeakSet,As=function(e){const t=document.createElement("span"),i=this.flattedOptions.filter(o=>o.childOf===e.value);return t.textContent=`(${i.length})`,t.classList.add("treeselect-list__item-label-counter"),t},Vt=new WeakSet,Bs=function(e,t){const i=this.flattedOptions.find(o=>o.id===t.value);if(i){if(i!=null&&i.isGroup&&this.disabledBranchNode){const o=Il(e);o==null||o.dispatchEvent(new Event("mousedown"));return}if(this.isSingleSelect){const[o]=r(this,D);if(i.id===o)return;V(this,D,[i.id]),ri([i.id],this.flattedOptions,this.isSingleSelect,this.isIndependentNodes)}else{i.checked=e.checked;const o=ts(i,this.flattedOptions,this.isIndependentNodes);e.checked=o}qe(this.flattedOptions,this.srcElement,this.iconElements,r(this,D)),c(this,Ot,Ps).call(this)}},Wt=new WeakSet,Us=function(e){var t,i;const o=(i=(t=e.target)==null?void 0:t.parentNode)==null?void 0:i.querySelector("[input-id]"),s=(o==null?void 0:o.getAttribute("input-id"))??null,a=gs(s,this.flattedOptions);a&&(a.isClosed=!a.isClosed,Be(this.flattedOptions,a),qe(this.flattedOptions,this.srcElement,this.iconElements,r(this,D)),this.arrowClickCallback(a.id,a.isClosed))},we=new WeakSet,Ie=function(e,t){const i="treeselect-list__item--focused";if(e){const o=Array.from(this.srcElement.querySelectorAll(`.${i}`));o.length&&o.forEach(s=>s.classList.remove(i)),t.classList.add(i)}else t.classList.remove(i)},Le=new WeakSet,Nt=function(){const{ungroupedNodes:e,groupedNodes:t,allNodes:i}=El(this.flattedOptions);this.selectedNodes={nodes:e,groupedNodes:t,allNodes:i}},Ot=new WeakSet,Ps=function(){c(this,Le,Nt).call(this),this.inputCallback(this.selectedNodes),this.value=this.selectedNodes.nodes.map(e=>e.id)};const Fs=({parentHtmlContainer:e,staticList:t,appendToBody:i,isSingleSelect:o,value:s,direction:a})=>{e||console.error("Validation: parentHtmlContainer prop is required!"),t&&i&&console.error("Validation: You should set staticList to false if you use appendToBody!"),o&&Array.isArray(s)&&console.error("Validation: if you use isSingleSelect prop, you should pass a single value!"),!o&&!Array.isArray(s)&&console.error("Validation: you should pass an array as a value!"),a&&a!=="auto"&&a!=="bottom"&&a!=="top"&&console.error("Validation: you should pass (auto | top | bottom | undefined) as a value for the direction prop!")},pe=e=>e.map(t=>t.id),Dl=e=>e?Array.isArray(e)?e:[e]:[],jl=(e,t)=>{if(t){const[i]=e;return i??null}return e};var k,q,ne,ye,ae,I,R,P,Y,ke,At,Ce,Re,Bt,Ms,Ut,Hs,Pt,Is,Ft,Rs,Mt,Gs,Ht,Ds,Te,It,Rt,js,Gt,Qs,Dt,zs,jt,Js,Ve,Qt,zt,gi,ue,We,xe,Ge,re,Se,Jt,Ks,Ee,De,Kt,Ys,Yt,Xs,Xt,Zs,Zt,$s,$t,ei;class Ql{constructor({parentHtmlContainer:t,value:i,options:o,openLevel:s,appendToBody:a,alwaysOpen:_,showTags:g,tagsCountText:x,clearable:C,searchable:b,placeholder:y,grouped:m,isGroupedValue:n,listSlotHtmlComponent:v,disabled:T,emptyText:w,staticList:W,id:U,ariaLabel:Ue,isSingleSelect:me,showCount:yi,disabledBranchNode:ki,direction:Ci,expandSelected:xi,saveScrollPosition:Si,isIndependentNodes:Ei,iconElements:qi,inputCallback:Li,openCallback:Ti,closeCallback:Vi,nameChangeCallback:Wi,searchCallback:Ni,openCloseGroupCallback:Oi}){d(this,ke),d(this,Ce),d(this,Bt),d(this,Ut),d(this,Pt),d(this,Ft),d(this,Mt),d(this,Ht),d(this,Te),d(this,Rt),d(this,Gt),d(this,Dt),d(this,jt),d(this,Ve),d(this,zt),d(this,ue),d(this,xe),d(this,re),d(this,Jt),d(this,Ee),d(this,Kt),d(this,Yt),d(this,Xt),d(this,Zt),d(this,$t),h(this,"parentHtmlContainer"),h(this,"value"),h(this,"options"),h(this,"openLevel"),h(this,"appendToBody"),h(this,"alwaysOpen"),h(this,"showTags"),h(this,"tagsCountText"),h(this,"clearable"),h(this,"searchable"),h(this,"placeholder"),h(this,"grouped"),h(this,"isGroupedValue"),h(this,"listSlotHtmlComponent"),h(this,"disabled"),h(this,"emptyText"),h(this,"staticList"),h(this,"id"),h(this,"ariaLabel"),h(this,"isSingleSelect"),h(this,"showCount"),h(this,"disabledBranchNode"),h(this,"direction"),h(this,"expandSelected"),h(this,"saveScrollPosition"),h(this,"isIndependentNodes"),h(this,"iconElements"),h(this,"inputCallback"),h(this,"openCallback"),h(this,"closeCallback"),h(this,"nameChangeCallback"),h(this,"searchCallback"),h(this,"openCloseGroupCallback"),h(this,"ungroupedValue"),h(this,"groupedValue"),h(this,"allValue"),h(this,"isListOpened"),h(this,"selectedName"),h(this,"srcElement"),d(this,k,null),d(this,q,null),d(this,ne,null),d(this,ye,0),d(this,ae,0),d(this,I,null),d(this,R,null),d(this,P,null),d(this,Y,null),Fs({parentHtmlContainer:t,value:i,staticList:W,appendToBody:a,isSingleSelect:me}),this.parentHtmlContainer=t,this.value=[],this.options=o??[],this.openLevel=s??0,this.appendToBody=a??!1,this.alwaysOpen=!!(_&&!T),this.showTags=g??!0,this.tagsCountText=x??"elements selected",this.clearable=C??!0,this.searchable=b??!0,this.placeholder=y??"Search...",this.grouped=m??!0,this.isGroupedValue=n??!1,this.listSlotHtmlComponent=v??null,this.disabled=T??!1,this.emptyText=w??"No results found...",this.staticList=!!(W&&!this.appendToBody),this.id=U??"",this.ariaLabel=Ue??"",this.isSingleSelect=me??!1,this.showCount=yi??!1,this.disabledBranchNode=ki??!1,this.direction=Ci??"auto",this.expandSelected=xi??!1,this.saveScrollPosition=Si??!0,this.isIndependentNodes=Ei??!1,this.iconElements=os(qi),this.inputCallback=Li,this.openCallback=Ti,this.closeCallback=Vi,this.nameChangeCallback=Wi,this.searchCallback=Ni,this.openCloseGroupCallback=Oi,this.ungroupedValue=[],this.groupedValue=[],this.allValue=[],this.isListOpened=!1,this.selectedName="",this.srcElement=null,c(this,ke,At).call(this,i)}mount(){Fs({parentHtmlContainer:this.parentHtmlContainer,value:this.value,staticList:this.staticList,appendToBody:this.appendToBody,isSingleSelect:this.isSingleSelect}),this.iconElements=os(this.iconElements),c(this,ke,At).call(this,this.value)}updateValue(t){const i=Dl(t),o=r(this,k);o&&(o.updateValue(i),c(this,Te,It).call(this,o==null?void 0:o.selectedNodes))}destroy(){this.srcElement&&(c(this,Ve,Qt).call(this),this.srcElement.innerHTML="",this.srcElement=null,c(this,re,Se).call(this,!0))}focus(){r(this,q)&&r(this,q).focus()}toggleOpenClose(){r(this,q)&&(r(this,q).openClose(),r(this,q).focus())}scrollWindowHandler(){this.updateListPosition()}focusWindowHandler(t){var i,o,s;(i=this.srcElement)!=null&&i.contains(t.target)||(o=r(this,k))!=null&&o.srcElement.contains(t.target)||((s=r(this,q))==null||s.blur(),c(this,re,Se).call(this,!1),c(this,ue,We).call(this,!1))}blurWindowHandler(){var t;(t=r(this,q))==null||t.blur(),c(this,re,Se).call(this,!1),c(this,ue,We).call(this,!1)}updateListPosition(){var t;const i=this.srcElement,o=(t=r(this,k))==null?void 0:t.srcElement;if(!i||!o)return;const{height:s}=o.getBoundingClientRect(),{x:a,y:_,height:g,width:x}=i.getBoundingClientRect(),C=window.innerHeight,b=_,y=C-_-g;let m=b>y&&b>=s&&y<s;if(this.direction!=="auto"&&(m=this.direction==="top"),this.appendToBody){(o.style.top!=="0px"||o.style.left!=="0px")&&(o.style.top="0px",o.style.left="0px");const v=a+window.scrollX,T=m?_+window.scrollY-s:_+window.scrollY+g;o.style.transform=`translate(${v}px,${T}px)`,o.style.width=`${x}px`}const n=m?"top":"bottom";o.getAttribute("direction")!==n&&(o.setAttribute("direction",n),c(this,zt,gi).call(this,m,this.appendToBody))}}k=new WeakMap,q=new WeakMap,ne=new WeakMap,ye=new WeakMap,ae=new WeakMap,I=new WeakMap,R=new WeakMap,P=new WeakMap,Y=new WeakMap,ke=new WeakSet,At=function(e){var t;this.destroy();const{container:i,list:o,input:s}=c(this,Bt,Ms).call(this);this.srcElement=i,V(this,k,o),V(this,q,s),V(this,I,this.scrollWindowHandler.bind(this)),V(this,R,this.scrollWindowHandler.bind(this)),V(this,P,this.focusWindowHandler.bind(this)),V(this,Y,this.blurWindowHandler.bind(this)),this.alwaysOpen&&((t=r(this,q))==null||t.openClose()),this.disabled?this.srcElement.classList.add("treeselect--disabled"):this.srcElement.classList.remove("treeselect--disabled"),this.updateValue(e??this.value)},Ce=new WeakSet,Re=function({groupedNodes:e,nodes:t,allNodes:i}){this.ungroupedValue=t?pe(t):[],this.groupedValue=e?pe(e):[],this.allValue=i?pe(i):[];let o=[];this.isIndependentNodes||this.isSingleSelect?o=this.allValue:this.isGroupedValue?o=this.groupedValue:o=this.ungroupedValue,this.value=jl(o,this.isSingleSelect)},Bt=new WeakSet,Ms=function(){const e=this.parentHtmlContainer;e.classList.add("treeselect");const t=new Gl({value:[],options:this.options,openLevel:this.openLevel,listSlotHtmlComponent:this.listSlotHtmlComponent,emptyText:this.emptyText,isSingleSelect:this.isSingleSelect,showCount:this.showCount,disabledBranchNode:this.disabledBranchNode,expandSelected:this.expandSelected,isIndependentNodes:this.isIndependentNodes,iconElements:this.iconElements,inputCallback:o=>c(this,Rt,js).call(this,o),arrowClickCallback:(o,s)=>c(this,Gt,Qs).call(this,o,s),mouseupCallback:()=>{var o;return(o=r(this,q))==null?void 0:o.focus()}}),i=new wl({value:[],showTags:this.showTags,tagsCountText:this.tagsCountText,clearable:this.clearable,isAlwaysOpened:this.alwaysOpen,searchable:this.searchable,placeholder:this.placeholder,disabled:this.disabled,isSingleSelect:this.isSingleSelect,id:this.id,ariaLabel:this.ariaLabel,iconElements:this.iconElements,inputCallback:o=>c(this,Ut,Hs).call(this,o),searchCallback:o=>c(this,Ft,Rs).call(this,o),openCallback:()=>c(this,jt,Js).call(this),closeCallback:()=>c(this,Ve,Qt).call(this),keydownCallback:o=>c(this,Pt,Is).call(this,o),focusCallback:()=>c(this,Mt,Gs).call(this),blurCallback:()=>c(this,Ht,Ds).call(this),nameChangeCallback:o=>c(this,Dt,zs).call(this,o)});return this.appendToBody&&V(this,ne,new ResizeObserver(()=>this.updateListPosition())),e.append(i.srcElement),{container:e,list:t,input:i}},Ut=new WeakSet,Hs=function(e){var t,i;const o=pe(e);(t=r(this,k))==null||t.updateValue(o);const s=((i=r(this,k))==null?void 0:i.selectedNodes)??{};c(this,Ce,Re).call(this,s),c(this,Ee,De).call(this)},Pt=new WeakSet,Is=function(e){var t;this.isListOpened&&((t=r(this,k))==null||t.callKeyAction(e))},Ft=new WeakSet,Rs=function(e){r(this,ae)&&clearTimeout(r(this,ae)),V(this,ae,window.setTimeout(()=>{var t;(t=r(this,k))==null||t.updateSearchValue(e),this.updateListPosition()},350)),c(this,Zt,$s).call(this,e)},Mt=new WeakSet,Gs=function(){c(this,ue,We).call(this,!0),r(this,P)&&r(this,P)&&r(this,Y)&&(document.addEventListener("mousedown",r(this,P),!0),document.addEventListener("focus",r(this,P),!0),window.addEventListener("blur",r(this,Y)))},Ht=new WeakSet,Ds=function(){setTimeout(()=>{var e,t;const i=(e=r(this,q))==null?void 0:e.srcElement.contains(document.activeElement),o=(t=r(this,k))==null?void 0:t.srcElement.contains(document.activeElement);!i&&!o&&this.blurWindowHandler()},1)},Te=new WeakSet,It=function(e){var t;if(!e)return;let i=[];this.isIndependentNodes||this.isSingleSelect?i=e.allNodes:this.grouped?i=e.groupedNodes:i=e.nodes,(t=r(this,q))==null||t.updateValue(i),c(this,Ce,Re).call(this,e)},Rt=new WeakSet,js=function(e){var t,i,o;c(this,Te,It).call(this,e),this.isSingleSelect&&!this.alwaysOpen&&((t=r(this,q))==null||t.openClose(),(i=r(this,q))==null||i.clearSearch()),(o=r(this,q))==null||o.focus(),c(this,Ee,De).call(this)},Gt=new WeakSet,Qs=function(e,t){var i;(i=r(this,q))==null||i.focus(),this.updateListPosition(),c(this,$t,ei).call(this,e,t)},Dt=new WeakSet,zs=function(e){this.selectedName!==e&&(this.selectedName=e,c(this,Kt,Ys).call(this))},jt=new WeakSet,Js=function(){var e;this.isListOpened=!0,r(this,I)&&r(this,R)&&(window.addEventListener("scroll",r(this,I),!0),window.addEventListener("resize",r(this,R))),!(!r(this,k)||!this.srcElement)&&(this.appendToBody?(document.body.appendChild(r(this,k).srcElement),(e=r(this,ne))==null||e.observe(this.srcElement)):this.srcElement.appendChild(r(this,k).srcElement),this.updateListPosition(),c(this,xe,Ge).call(this,!0),c(this,Jt,Ks).call(this),c(this,Yt,Xs).call(this))},Ve=new WeakSet,Qt=function(){var e;this.alwaysOpen||(this.isListOpened=!1,r(this,I)&&r(this,R)&&(window.removeEventListener("scroll",r(this,I),!0),window.removeEventListener("resize",r(this,R))),!r(this,k)||!this.srcElement)||!(this.appendToBody?document.body.contains(r(this,k).srcElement):this.srcElement.contains(r(this,k).srcElement))||(V(this,ye,r(this,k).srcElement.scrollTop),this.appendToBody?(document.body.removeChild(r(this,k).srcElement),(e=r(this,ne))==null||e.disconnect()):this.srcElement.removeChild(r(this,k).srcElement),c(this,xe,Ge).call(this,!1),c(this,Xt,Zs).call(this))},zt=new WeakSet,gi=function(e,t){if(!r(this,k)||!r(this,q))return;const i=t?"treeselect-list--top-to-body":"treeselect-list--top",o=t?"treeselect-list--bottom-to-body":"treeselect-list--bottom";e?(r(this,k).srcElement.classList.add(i),r(this,k).srcElement.classList.remove(o),r(this,q).srcElement.classList.add("treeselect-input--top"),r(this,q).srcElement.classList.remove("treeselect-input--bottom")):(r(this,k).srcElement.classList.remove(i),r(this,k).srcElement.classList.add(o),r(this,q).srcElement.classList.remove("treeselect-input--top"),r(this,q).srcElement.classList.add("treeselect-input--bottom"))},ue=new WeakSet,We=function(e){!r(this,q)||!r(this,k)||(e?(r(this,q).srcElement.classList.add("treeselect-input--focused"),r(this,k).srcElement.classList.add("treeselect-list--focused")):(r(this,q).srcElement.classList.remove("treeselect-input--focused"),r(this,k).srcElement.classList.remove("treeselect-list--focused")))},xe=new WeakSet,Ge=function(e){var t,i,o,s;e?(t=r(this,q))==null||t.srcElement.classList.add("treeselect-input--opened"):(i=r(this,q))==null||i.srcElement.classList.remove("treeselect-input--opened"),this.staticList?(o=r(this,k))==null||o.srcElement.classList.add("treeselect-list--static"):(s=r(this,k))==null||s.srcElement.classList.remove("treeselect-list--static")},re=new WeakSet,Se=function(e){!r(this,I)||!r(this,R)||!r(this,P)||!r(this,Y)||((!this.alwaysOpen||e)&&(window.removeEventListener("scroll",r(this,I),!0),window.removeEventListener("resize",r(this,R))),document.removeEventListener("mousedown",r(this,P),!0),document.removeEventListener("focus",r(this,P),!0),window.removeEventListener("blur",r(this,Y)))},Jt=new WeakSet,Ks=function(){var e,t,i;const o=(e=r(this,k))==null?void 0:e.isLastFocusedElementExist();this.saveScrollPosition&&o?(t=r(this,k))==null||t.srcElement.scroll(0,r(this,ye)):(i=r(this,k))==null||i.focusFirstListElement()},Ee=new WeakSet,De=function(){var e;(e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("input",{detail:this.value})),this.inputCallback&&this.inputCallback(this.value)},Kt=new WeakSet,Ys=function(){var e;(e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("name-change",{detail:this.selectedName})),this.nameChangeCallback&&this.nameChangeCallback(this.selectedName)},Yt=new WeakSet,Xs=function(){var e;this.alwaysOpen||((e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("open",{detail:this.value})),this.openCallback&&this.openCallback(this.value))},Xt=new WeakSet,Zs=function(){var e;this.alwaysOpen||((e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("close",{detail:this.value})),this.closeCallback&&this.closeCallback(this.value))},Zt=new WeakSet,$s=function(e){var t;const i=(e==null?void 0:e.trim())??"";(t=this.srcElement)==null||t.dispatchEvent(new CustomEvent("search",{detail:i})),this.searchCallback&&this.searchCallback(i)},$t=new WeakSet,ei=function(e,t){var i;(i=this.srcElement)==null||i.dispatchEvent(new CustomEvent("open-close-group",{detail:{groupId:e,isClosed:t}})),this.openCloseGroupCallback&&this.openCloseGroupCallback(e,t)};const zl=["value","id"],Jl=Bi({name:"Treeselect",props:{value:{type:[Array,Number,String],default:()=>[]},options:{type:Array,default:()=>[]},openLevel:{type:Number,default:0},appendToBody:{type:Boolean,default:!1},alwaysOpen:{type:Boolean,default:!1},showTags:{type:Boolean,default:!0},tagsCountText:{type:String,default:"elements selected"},clearable:{type:Boolean,default:!0},searchable:{type:Boolean,default:!0},placeholder:{type:String,default:"Select..."},grouped:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},emptyText:{type:String,default:"No results found..."},staticList:{type:Boolean,default:!1},id:{type:String,default:""},isSingleSelect:{type:Boolean,default:!1},showCount:{type:Boolean,default:!1},isGroupedValue:{type:Boolean,default:!1},disabledBranchNode:{type:Boolean,default:!1},direction:{type:String,default:"auto"},expandSelected:{type:Boolean,default:!1},saveScrollPosition:{type:Boolean,default:!0},isIndependentNodes:{type:Boolean,default:!1},iconElements:{type:Object,default:()=>({})}},emits:["input","open","close","name-change","search"],setup(e,{emit:t}){const i=Pe(null),o=Pe(null),s=Pe(null),a=b=>t("input",b),_=b=>t("open",b),g=b=>t("close",b),x=b=>t("name-change",b),C=b=>t("search",b);return Fe(()=>e,b=>{if(s.value){const y=te(s.value),m=te(b);let n=!1;Object.keys(m).forEach(v=>{const T=m[v]===y[v];!zl.includes(v)&&!T&&(y[v]=m[v],n=!0)}),n&&y.mount()}},{deep:!0}),Fe(()=>e.value,b=>{if(s.value){const y=te(s.value),m=te(b);JSON.stringify(y.value)!==JSON.stringify(m)&&y.updateValue(m)}}),Fe(()=>e.id,b=>{if(s.value){const y=te(s.value);(y.id||b)&&(y.id=b??"",y.mount())}}),Ui(()=>{if(!i.value)throw new Error("Treeselect container ref is not defined");s.value=new Ql({parentHtmlContainer:i.value,value:e.value,options:e.options,openLevel:e.openLevel,appendToBody:e.appendToBody,alwaysOpen:e.alwaysOpen,showTags:e.showTags,tagsCountText:e.tagsCountText,clearable:e.clearable,searchable:e.searchable,placeholder:e.placeholder,grouped:e.grouped,disabled:e.disabled,emptyText:e.emptyText,staticList:e.staticList,id:e.id,isSingleSelect:e.isSingleSelect,showCount:e.showCount,isGroupedValue:e.isGroupedValue,disabledBranchNode:e.disabledBranchNode,direction:e.direction,expandSelected:e.expandSelected,saveScrollPosition:e.saveScrollPosition,isIndependentNodes:e.isIndependentNodes,inputCallback:a,openCallback:_,closeCallback:g,nameChangeCallback:x,searchCallback:C,listSlotHtmlComponent:o.value??null,iconElements:e.iconElements})}),Pi(()=>{s.value&&te(s.value).destroy()}),{treeselectContainerRef:i,treeselectAfterListSlotRef:o}}}),Kl=(e,t)=>{const i=e.__vccOpts||e;for(const[o,s]of t)i[o]=s;return i},Yl={ref:"treeselectContainerRef"},Xl={ref:"treeselectAfterListSlotRef",class:"treeselect__after-list-slot"};function Zl(e,t,i,o,s,a){return p(),f(O,null,[l("div",Yl,null,512),l("div",Xl,[Fi(e.$slots,"default")],512)],64)}const $l=Kl(Jl,[["render",Zl]]),en={name:"FormIndex",components:{WpHeadAlt:Zi,Treeselect:$l},async mounted(){this.form_id?await this.getForm():this.cbxmcratingreviewpro_active&&(this.form.hide_author_link=0,this.form.hide_avatar=0,this.form.hide_all_user_name=0,this.form.allow_user_to_hide=0,this.form.show_privacy_consent=0,this.form.allow_multiple_rating=0)},data(){var e;return{cbxmcratingreview_vue_var,form_status:cbxmcratingreview_vue_var.form_status,form_id:Number((e=this.$route.params)!=null&&e.id?this.$route.params.id:0),page:0,submitted:!1,form:{name:"Example Rating Form",status:1,post_types:["post"],user_roles_rate:["administrator","editor","author","contributor","subscriber"],user_roles_view:["administrator","editor","author","contributor","subscriber","guest"],custom_criteria:cbxmcratingreview_vue_var.form_default_criterias,custom_question:cbxmcratingreview_vue_var.form_default_questions,enable_auto_integration:1,show_on_single:1,show_on_home:1,show_on_arcv:1,enable_question:1,question_last_count:1,criteria_last_count:2,post_types_auto:[]},selectedTab:"general_fields",post_types:this.treeselectFormatting(cbxmcratingreview_vue_var.post_types),translations:cbxmcratingreview_vue_var.translations,criterias:cbxmcratingreview_vue_var.form_default_criterias,cbxmcratingreviewpro_active:cbxmcratingreview_vue_var==null?void 0:cbxmcratingreview_vue_var.cbxmcratingreviewpro_active,question_type:"text",form_default_new_criteria:cbxmcratingreview_vue_var.form_default_new_criteria}},methods:{async saveForm(){const{valid:e}=await this.$refs.form.validate();if(e){let t=this.form;this.submitted=!0,await this.axios.post(cbxmcratingreview_vue_var.rest_end_points.save_form,t).then(i=>{var o,s,a,_,g,x,C;if(i.data.success)this.successMessage(i.data.info),this.form_id==0&&((s=(o=i==null?void 0:i.data)==null?void 0:o.data)!=null&&s.id)&&(this.form_id=(_=(a=i==null?void 0:i.data)==null?void 0:a.data)==null?void 0:_.id,this.$router.push("/form/"+((x=(g=i==null?void 0:i.data)==null?void 0:g.data)==null?void 0:x.id)));else if((C=i.data)!=null&&C.errors){let b="<ul>";for(let y in i.data.errors)i.data.errors.hasOwnProperty(y)&&(b+=`<li>${i.data.errors[y]}</li>`);b+="</ul>",this.errorMessage(b)}else{let b=i.data.info;typeof i.data.error<"u"&&i.data.error&&(b+=i.data.error),this.errorMessage(b)}}).catch(i=>{this.errorMessage(i)}),this.submitted=!1}},getForm(){this.axios.get(this.cbxmcratingreview_vue_var.rest_end_points.get_form+"?id="+this.form_id).then(e=>{var t,i,o;if((t=e==null?void 0:e.data)!=null&&t.error){this.errorMessage((i=e==null?void 0:e.data)==null?void 0:i.error),this.$router.push("/");return}this.form.id=this.form_id;for(let s in this.cbxmcratingreview_vue_var.form_default_fields)this.cbxmcratingreview_vue_var.form_default_fields.hasOwnProperty(s)&&(this.form[s]=((o=e==null?void 0:e.data)==null?void 0:o[s])??this.cbxmcratingreview_vue_var.form_default_fields[s].default)}).catch(e=>{this.errorMessage(e)})},treeselectFormatting(e){let t=[];for(var i in e)if(e.hasOwnProperty(i)){let o={name:e[i],value:i};t.push(o)}return t},addNewQuestion(e=this.question_type){let t={type:e,enabled:1,required:0,title:"Sample Question Title"};e==="radio"&&(t.options=this.cbxmcratingreview_vue_var.default_radio_options),e==="select"&&(t.options=this.cbxmcratingreview_vue_var.default_select_options),e==="multicheckbox"&&(t.options=this.cbxmcratingreview_vue_var.default_multicheckbox_options),e==="number"&&(t.min=0,t.max=100,t.step=1),["number","text","textarea"].includes(e)&&(t.placeholder="Write here"),Array.isArray(this.form.custom_question)&&this.form.custom_question.push(t)},moveUpQuestion(e){if(e>0){const t=this.form.custom_question.splice(e,1)[0];this.form.custom_question.splice(e-1,0,t)}},moveDownQuestion(e){if(e<this.form.custom_question.length-1){const t=this.form.custom_question.splice(e,1)[0];this.form.custom_question.splice(e+1,0,t)}},deleteQuestion(e){this.form.custom_question.splice(e,1)},addNewOptions(e){Array.isArray(this.form.custom_question[e].options)&&this.form.custom_question[e].options.push("")},removeQuestionOption(e,t){Array.isArray(this.form.custom_question[t].options)&&this.form.custom_question[t].options.splice(e,1)},addNewCriteria(){let e={};e=this.cbxmcratingreview_vue_var.form_default_new_criteria,e.criteria_id=this.form.criteria_last_count,Array.isArray(this.form.custom_criteria)&&(this.form.custom_criteria.push(e),this.form.criteria_last_count++)},moveUpCriteria(e){if(e>0){const t=this.form.custom_criteria.splice(e,1)[0];this.form.custom_criteria.splice(e-1,0,t)}},moveDownCriteria(e){if(e<this.form.custom_criteria.length-1){const t=this.form.custom_criteria.splice(e,1)[0];this.form.custom_criteria.splice(e+1,0,t)}},deleteCriteria(e){this.form.custom_criteria.splice(e,1)}}},tn={id:"cbxmcratingreview_builder_actions",class:"cbx_builder_actions cbxmcratingreview_builder_actions cbxmcratingreviewform_builder_actions"},sn={class:"container"},on={class:"cbxmcratingreview_builder_actions_wrap"},ln={class:"row"},nn={class:"col-8 is-vertical-align"},an={key:0},rn={class:"col-4 is-right"},cn={class:"cbxmcratingreview_form container"},dn={class:"row"},un={class:"col-8"},hn={class:"cbxmcratingreview-main"},mn={class:"cbxmcratingreview-edit-main-content"},_n={class:"tabs"},pn={class:"tab-content"},bn={class:"cbx_form_wrapper global_common_form form-wrapper-500 cbxmcratingreview_form_wrapper"},vn={class:"row"},fn={class:"col-12"},gn={class:"form-group mt-15"},wn={key:0,class:"form-label"},yn=["placeholder"],kn={class:"field-error"},Cn=["value"],xn={class:"field-error"},Sn={key:3,class:"radio_fields magic_radio_fields radio_fields_inline mt-15"},En={class:"magic-radio-field"},qn=["id","name","value","onUpdate:modelValue"],Ln={for:"show_on_single-enabled"},Tn={key:4},Vn={class:"cbx_form_wrapper global_common_form form-wrapper-500 cbxmcratingreview_form_wrapper"},Wn={class:"row"},Nn={class:"col-12"},On={class:"custom-criteria-wrapper custom-criteria-wrapper-criteria-index-0"},An={class:"form-item-criteria d-flex"},Bn=["onClick"],Un={class:"cbx-icon"},Pn=["onUpdate:modelValue"],Fn={key:0,class:"custom-criteria-actions d-flex"},Mn=["onClick"],Hn={class:"cbx-icon"},In={class:"sr-only"},Rn=["onClick"],Gn={class:"cbx-icon"},Dn={class:"sr-only"},jn=["onClick"],Qn={class:"cbx-icon"},zn={class:"sr-only"},Jn={key:0,class:"custom-criteria-wrapper_inside mt-10"},Kn={class:"form-item-custom-criteria-stars form-type-checkboxes"},Yn={class:"form-item-custom-criteria-stars-box form-checkboxes"},Xn={class:"form-item form-type-checkbox form-item-custom-criteria-star"},Zn={class:"field-error"},$n={class:"form-item",id:"custom-question"},ea={class:"edit-custom-question-fields-wrapper custom-question-table"},ta={class:"custom-question-table-row custom-question-table-row-header"},sa={class:"custom-question-table-col custom-question-table-col-header",style:{width:"30%"}},ia={class:"custom-question-table-col custom-question-table-col-header",style:{width:"15%"}},oa={class:"custom-question-table-col custom-question-table-col-header",style:{width:"10%"}},la={class:"custom-question-table-col custom-question-table-col-header",style:{width:"30%"}},na={class:"custom-question-table-col custom-question-table-col-header",style:{width:"15%"}},aa={class:"custom-question-table-row custom-question-table-row-item"},ra={class:"custom-question-table-col custom-question-table-col-item custom-question-table-col-title",style:{width:"30%"}},ca={id:"question-label-0",class:"question-label question-label-editable mouse_normal"},da={class:"field-error"},ua={class:"custom-question-table-col custom-question-table-col-item custom-question-table-col-control",style:{width:"15%"}},ha={class:"radio_fields magic_radio_fields radio_fields_inline mt-15"},ma={class:"magic-radio-field"},_a=["id","onUpdate:modelValue"],pa=["for"],ba={class:"magic-radio-field"},va=["id","onUpdate:modelValue"],fa=["for"],ga={class:"radio_fields magic_radio_fields radio_fields_inline mt-15"},wa={class:"magic-radio-field"},ya=["id","onUpdate:modelValue"],ka=["for"],Ca={class:"magic-radio-field"},xa=["id","onUpdate:modelValue"],Sa=["for"],Ea={class:"custom-question-table-col custom-question-table-col-item custom-question-table-col-type",style:{width:"10%"}},qa={class:"custom-question-table-col custom-question-table-col-item custom-question-table-col-preview",style:{width:"30%"}},La={key:0,class:"form_item"},Ta=["for"],Va=["id","onUpdate:modelValue","placeholder"],Wa={key:1,class:"form_item"},Na=["for"],Oa=["id","onUpdate:modelValue","placeholder"],Aa={key:2,class:"form_item"},Ba={class:"checkbox checkbox_field"},Ua={key:3,class:"form_item"},Pa=["for"],Fa=["id","onUpdate:modelValue","placeholder"],Ma=["for"],Ha=["id","onUpdate:modelValue","placeholder"],Ia=["for"],Ra=["id","onUpdate:modelValue","placeholder"],Ga=["for"],Da=["id","onUpdate:modelValue","placeholder"],ja={key:4,class:"option-group mt-15"},Qa={class:"form-group",style:{display:"flex"}},za=["onUpdate:modelValue"],Ja=["onClick"],Ka={class:"cbx-icon cbx-icon-15"},Ya=["onClick"],Xa={class:"cbx-icon cbx-icon-15"},Za={class:"custom-question-table-col custom-question-table-col-item custom-question-table-col-actions",style:{width:"15%"}},$a={key:0},er=["onClick"],tr={class:"cbx-icon"},sr={class:"sr-only"},ir=["onClick"],or={class:"cbx-icon"},lr={class:"sr-only"},nr=["onClick"],ar={class:"cbx-icon"},rr={class:"sr-only"},cr={key:0},dr={key:1,class:"d-flex mt-10"},ur={for:"question_field_types_html"},hr=["value"],mr={class:"col-4"},_r={id:"cbxmcratingreview-edit-sidebar"},pr={class:"cbxmcratingreview-sidebar-widgets"},br={class:"cbxmcratingreview-sidebar-widget"},vr={class:"cbxmcratingreview-sidebar-heading"},fr={class:"cbxmcratingreview-sidebar-content"},gr={class:"form-group mt-20"},wr={class:"radio_fields magic_radio_fields radio_fields_inline mt-15"},yr={class:"magic-radio-field"},kr={for:"form-enabled"},Cr={class:"magic-radio-field"},xr={for:"form-disabled"},Sr={class:"cbxmcratingreview-sidebar-widget"},Er={class:"cbxmcratingreview-sidebar-heading"},qr={class:"cbxmcratingreview-sidebar-content"},Lr={class:"form-group mt-20"},Tr={class:"form-label"},Vr={class:"radio_fields magic_radio_fields radio_fields_inline mt-15"},Wr={class:"magic-radio-field"},Nr={for:"enable_auto_integration-enabled"},Or={class:"magic-radio-field"},Ar={for:"enable_auto_integration-disabled"},Br={class:"form-group mt-20"},Ur={class:"form-label"},Pr={class:"cbxmcratingreview-sidebar-widget"},Fr={class:"cbxmcratingreview-sidebar-heading"},Mr={class:"cbxmcratingreview-sidebar-content"},Hr={class:"form-group mt-20"},Ir={class:"form-label"},Rr={class:"radio_fields magic_radio_fields radio_fields_inline mt-15"},Gr={class:"magic-radio-field"},Dr={for:"enable_question-enabled"},jr={class:"magic-radio-field"},Qr={for:"enable_question-disabled"};function zr(e,t,i,o,s,a){const _=A("Field"),g=A("ErrorMessage"),x=A("Treeselect"),C=A("inline-svg"),b=A("Form",!0),y=A("wp-head-alt");return p(),Oe(y,{heading:s.translations.form_manager,"class-name":"cbxmcratingreview-page-form cbxmcratingreview-page-listing"},{default:N(()=>[l("div",tn,[l("div",sn,[l("div",on,[l("div",ln,[l("div",nn,[l("h2",null,[$(u(s.translations.form)+" ",1),s.form_id?(p(),f("span",an,": "+u(s.form.name)+" ("+u(s.translations.id+": "+s.form_id)+")",1)):L("",!0)])]),l("div",rn,[l("button",{class:Q(["button primary ld-ext-right",s.submitted?"running":""]),onClick:t[0]||(t[0]=(...m)=>a.saveForm&&a.saveForm(...m))},[$(u(s.translations.save)+" ",1),t[15]||(t[15]=l("span",{class:"ld ld-spin ld-ring"},null,-1))],2)])])])])]),l("div",cn,[S(b,{onSubmit:a.saveForm,ref:"form"},{default:N(()=>[l("div",dn,[l("div",un,[l("div",hn,[l("div",mn,[l("nav",_n,[l("a",{class:Q(s.selectedTab==="general_fields"?"active":""),onClick:t[1]||(t[1]=()=>{this.selectedTab="general_fields"})},u(s.translations.general_fields),3),l("a",{class:Q(s.selectedTab==="custom_criteria"?"active":""),onClick:t[2]||(t[2]=()=>{this.selectedTab="custom_criteria"})},u(s.translations.custom_criteria),3),l("a",{class:Q(s.selectedTab==="custom_questions"?"active":""),onClick:t[3]||(t[3]=()=>{this.selectedTab="custom_questions"})},u(s.translations.custom_questions),3)]),l("div",pn,[l("div",{id:"basic",class:Q(["tab-pane fade",s.selectedTab==="general_fields"?"show":"hide"])},[l("div",bn,[l("div",vn,[l("div",fn,[(p(!0),f(O,null,K(s.cbxmcratingreview_vue_var.form_default_fields,(m,n)=>(p(),f("div",gn,[m!=null&&m.com_field?(p(),f(O,{key:0},[m.label?(p(),f("label",wn,u(m.label)+" : ",1)):L("",!0),m.type==="text"?(p(),f(O,{key:1},[S(_,{name:n,rules:m.required?"required":"",modelValue:s.form[n],"onUpdate:modelValue":v=>s.form[n]=v},{default:N(({field:v,errors:T})=>[l("input",_e({ref_for:!0},v,{type:"text",class:["form-control",{error:!!T.length}],placeholder:v.placeholder}),null,16,yn)]),_:2},1032,["name","rules","modelValue","onUpdate:modelValue"]),l("div",kn,[S(g,{name:n,class:"invalid-feedback"},null,8,["name"])])],64)):L("",!0),m.type==="select"?(p(),f(O,{key:2},[S(x,{options:a.treeselectFormatting(m.options),expandSelected:!0,isSingleSelect:!1,value:s.form[n],modelValue:s.form[n],"onUpdate:modelValue":v=>s.form[n]=v,rules:m.required?"required":"",onInput:v=>s.form[n]=v},null,8,["options","value","modelValue","onUpdate:modelValue","rules","onInput"]),m.required?(p(),f(O,{key:0},[S(_,{name:n,rules:m.required?"requiredArray":"",modelValue:s.form[n],"onUpdate:modelValue":v=>s.form[n]=v},{default:N(({field:v,errors:T})=>[l("input",_e({type:"hidden",ref_for:!0},v,{value:s.form[n]}),null,16,Cn)]),_:2},1032,["name","rules","modelValue","onUpdate:modelValue"]),l("div",xn,[S(g,{name:n,class:"invalid-feedback"},null,8,["name"])])],64)):L("",!0)],64)):L("",!0),m.type==="radio"?(p(),f("div",Sn,[(p(!0),f(O,null,K(m.options,(v,T)=>(p(),f("div",En,[E(l("input",{type:"radio",id:n+"-"+T,name:n,value:T,class:"magic-radio","onUpdate:modelValue":w=>s.form[n]=w},null,8,qn),[[B,s.form[n]]]),l("label",Ln,u(v),1)]))),256))])):L("",!0),m!=null&&m.desc?(p(),f("small",Tn,u(m.desc),1)):L("",!0)],64)):L("",!0)]))),256))])])])],2),l("div",{id:"custom_criteria",class:Q(["tab-pane fade",s.selectedTab==="custom_criteria"?"show":"hide"])},[l("div",Vn,[l("div",Wn,[l("div",Nn,[l("h3",null,u(s.translations.custom_criterias),1),(p(!0),f(O,null,K(s.form.custom_criteria,(m,n)=>(p(),f("div",On,[l("div",An,[l("span",{class:"button small icon icon-only",onClick:v=>m.show=m.show?0:1},[l("i",Un,[S(C,{src:s.cbxmcratingreview_vue_var.icons_url+"icon_gear.svg"},null,8,["src"])])],8,Bn),E(l("input",{type:"text","onUpdate:modelValue":v=>s.form.custom_criteria[n].label=v,class:"form-text ml-10 mr-10",style:{width:"230px"}},null,8,Pn),[[H,s.form.custom_criteria[n].label]]),s.cbxmcratingreviewpro_active?(p(),f("div",Fn,[s.form.custom_criteria.length>1?(p(),f("button",{key:0,type:"button",class:"button error icon icon-only icon-inline small",onClick:v=>a.deleteCriteria(n)},[l("i",Hn,[S(C,{src:s.cbxmcratingreview_vue_var.icons_url+"icon_delete.svg"},null,8,["src"])]),l("span",In,u(s.translations.buttons.delete.sr_label),1)],8,Mn)):L("",!0),n!==0?(p(),f("button",{key:1,type:"button",class:"button primary icon icon-only icon-inline small",onClick:v=>a.moveUpCriteria(n)},[l("i",Gn,[S(C,{src:s.cbxmcratingreview_vue_var.icons_url+"icon_arrow_up.svg"},null,8,["src"])]),l("span",Dn,u(s.translations.buttons.delete.sr_label),1)],8,Rn)):L("",!0),n!==s.form.custom_criteria.length-1?(p(),f("button",{key:2,type:"button",class:"button primary icon icon-only icon-inline small",onClick:v=>a.moveDownCriteria(n)},[l("i",Qn,[S(C,{src:s.cbxmcratingreview_vue_var.icons_url+"icon_arrow_down.svg"},null,8,["src"])]),l("span",zn,u(s.translations.buttons.delete.sr_label),1)],8,jn)):L("",!0)])):L("",!0)]),(m==null?void 0:m.show)==1?(p(),f("div",Jn,[l("div",Kn,[l("div",Yn,[(p(!0),f(O,null,K(m.stars,(v,T)=>(p(),f("div",Xn,[S(_,{name:"criteria-star-"+n+T,rules:"required",modelValue:s.form.custom_criteria[n].stars[T].title,"onUpdate:modelValue":w=>s.form.custom_criteria[n].stars[T].title=w},{default:N(({field:w,errors:W})=>[l("input",_e({ref_for:!0},w,{type:"text",class:["form-control",{error:!!W.length}]}),null,16)]),_:2},1032,["name","modelValue","onUpdate:modelValue"]),l("div",Zn,[S(g,{name:"criteria-star-"+n+T,class:"invalid-feedback"},null,8,["name"])])]))),256))])])])):L("",!0)]))),256)),s.cbxmcratingreviewpro_active?(p(),f("button",{key:0,type:"button",class:"button outline primary",onClick:t[4]||(t[4]=m=>a.addNewCriteria())},u(s.translations.add_new_criteria),1)):L("",!0)])])])],2),l("div",{class:Q(["tab-pane fade",s.selectedTab==="custom_questions"?"show":"hide"])},[l("h3",null,u(s.translations.questions),1),l("p",null,u(s.translations.questions_are_optional),1),t[26]||(t[26]=l("input",{id:"question_last_count",type:"hidden",name:"cbxmcratingreview_ratingForm[extrafields][question_last_count]",value:"1"},null,-1)),l("div",$n,[l("div",ea,[l("div",ta,[l("div",sa,u(s.translations.question_title),1),l("div",ia,u(s.translations.controls),1),l("div",oa,u(s.translations.field_type),1),l("div",la,u(s.translations.field_preview),1),l("div",na,u(s.translations.actions),1),t[16]||(t[16]=l("div",{style:{clear:"both"}},null,-1))]),t[25]||(t[25]=l("div",{style:{clear:"both"}},null,-1)),$(u(s.form.form_default_questions)+" ",1),(p(!0),f(O,null,K(s.form.custom_question,(m,n)=>{var v,T;return p(),f("div",aa,[l("div",ra,[l("label",ca,u(s.translations.question_title),1),S(_,{name:"question-label-input-"+n,rules:"required",modelValue:s.form.custom_question[n].title,"onUpdate:modelValue":w=>s.form.custom_question[n].title=w},{default:N(({field:w,errors:W})=>[l("input",_e({ref_for:!0},w,{type:"text",class:["form-control",{error:!!W.length}]}),null,16)]),_:2},1032,["name","modelValue","onUpdate:modelValue"]),l("div",da,[S(g,{name:"question-label-input-"+n,class:"invalid-feedback"},null,8,["name"])])]),l("div",ua,[l("p",null,u(s.translations.required_question),1),l("div",ha,[l("div",ma,[E(l("input",{type:"radio",id:"edit-custom-question-require-q-"+n+"-1",value:"1",class:"magic-radio","onUpdate:modelValue":w=>s.form.custom_question[n].required=w},null,8,_a),[[B,s.form.custom_question[n].required]]),l("label",{for:"edit-custom-question-require-q-"+n+"-1"},u(s.translations.yes),9,pa)]),l("div",ba,[E(l("input",{type:"radio",id:"edit-custom-question-require-q-"+n+"-0",value:"0",class:"magic-radio","onUpdate:modelValue":w=>s.form.custom_question[n].required=w},null,8,va),[[B,s.form.custom_question[n].required]]),l("label",{for:"edit-custom-question-require-q-"+n+"-0"},u(s.translations.no),9,fa)])]),l("p",null,u(s.translations.show_question)+" ?",1),l("div",ga,[l("div",wa,[E(l("input",{type:"radio",id:"edit-custom-question-enabled-q-"+n+"-1",value:"1",class:"magic-radio","onUpdate:modelValue":w=>s.form.custom_question[n].enabled=w},null,8,ya),[[B,s.form.custom_question[n].enabled]]),l("label",{for:"edit-custom-question-enabled-q-"+n+"-1"},u(s.translations.yes),9,ka)]),l("div",Ca,[E(l("input",{type:"radio",id:"edit-custom-question-enabled-q-"+n+"-0",value:"0",class:"magic-radio","onUpdate:modelValue":w=>s.form.custom_question[n].enabled=w},null,8,xa),[[B,s.form.custom_question[n].enabled]]),l("label",{for:"edit-custom-question-enabled-q-"+n+"-0"},u(s.translations.no),9,Sa)])])]),l("div",Ea,u(s.cbxmcratingreview_vue_var.question_field_types[s.form.custom_question[n].type]),1),l("div",qa,[s.form.custom_question[n].type==="text"?(p(),f("div",La,[l("label",{for:"cbxmcratingreview_q_field_"+n},u(s.translations.placeholder_text),9,Ta),t[17]||(t[17]=l("br",null,null,-1)),E(l("input",{id:"cbxmcratingreview_q_field_"+n,class:"regular-text",type:"text","onUpdate:modelValue":w=>s.form.custom_question[n].placeholder=w,placeholder:m.placeholder},null,8,Va),[[H,s.form.custom_question[n].placeholder]])])):L("",!0),s.form.custom_question[n].type==="textarea"?(p(),f("div",Wa,[l("label",{for:"cbxmcratingreview_q_field_"+n},u(s.translations.placeholder_text),9,Na),t[18]||(t[18]=l("br",null,null,-1)),E(l("textarea",{id:"cbxmcratingreview_q_field_"+n,"onUpdate:modelValue":w=>s.form.custom_question[n].placeholder=w,placeholder:m.placeholder},null,8,Oa),[[H,s.form.custom_question[n].placeholder]])])):L("",!0),s.form.custom_question[n].type==="checkbox"?(p(),f("div",Aa,[l("div",Ba,[t[19]||(t[19]=l("input",{type:"checkbox",class:"magic-checkbox"},null,-1)),l("label",null,u(s.form.custom_question[n].title),1)])])):L("",!0),s.form.custom_question[n].type==="number"?(p(),f("div",Ua,[l("label",{for:"cbxmcratingreview_q_field_"+n},u(s.translations.placeholder_text),9,Pa),t[20]||(t[20]=l("br",null,null,-1)),E(l("input",{id:"cbxmcratingreview_q_field_"+n,type:"text","onUpdate:modelValue":w=>s.form.custom_question[n].placeholder=w,placeholder:m.placeholder},null,8,Fa),[[H,s.form.custom_question[n].placeholder]]),l("label",{for:"cbxmcratingreview_q_field_min_"+n},u(s.translations.minimum_value),9,Ma),t[21]||(t[21]=l("br",null,null,-1)),E(l("input",{id:"cbxmcratingreview_q_field_min_"+n,type:"number","onUpdate:modelValue":w=>s.form.custom_question[n].min=w,placeholder:s.translations.minimum_value},null,8,Ha),[[H,s.form.custom_question[n].min]]),l("label",{for:"cbxmcratingreview_q_field_min_"+n},u(s.translations.maximum_value),9,Ia),t[22]||(t[22]=l("br",null,null,-1)),E(l("input",{id:"cbxmcratingreview_q_field_min_"+n,type:"number","onUpdate:modelValue":w=>s.form.custom_question[n].max=w,placeholder:s.translations.maximum_value},null,8,Ra),[[H,s.form.custom_question[n].max]]),l("label",{for:"cbxmcratingreview_q_field_min_"+n},u(s.translations.step_value),9,Ga),t[23]||(t[23]=l("br",null,null,-1)),E(l("input",{id:"cbxmcratingreview_q_field_min_"+n,type:"number","onUpdate:modelValue":w=>s.form.custom_question[n].step=w,placeholder:s.translations.step_value},null,8,Da),[[H,s.form.custom_question[n].step]])])):L("",!0),["radio","select","multicheckbox"].includes(s.form.custom_question[n].type)?(p(),f("div",ja,[l("label",null,u(s.cbxmcratingreview_vue_var.translations.options),1),l("table",null,[(v=s.form.custom_question[n].options)!=null&&v.length?(p(!0),f(O,{key:0},K((T=s.form.custom_question[n])==null?void 0:T.options,(w,W)=>(p(),f("tr",{key:n},[l("td",null,[l("div",Qa,[E(l("input",{type:"text",class:"form-control","onUpdate:modelValue":U=>s.form.custom_question[n].options[W].text=U},null,8,za),[[H,s.form.custom_question[n].options[W].text]])])]),l("td",null,[s.form.custom_question[n].options.length>1?(p(),f("button",{key:0,type:"button",class:"button error icon icon-only",onClick:U=>a.removeQuestionOption(W,n)},[l("i",Ka,[S(C,{src:s.cbxmcratingreview_vue_var.icons_url+"icon_minus.svg"},null,8,["src"])])],8,Ja)):L("",!0),s.form.custom_question[n].options.length-1===W?(p(),f("button",{key:1,type:"button",class:"button success icon icon-only ml-10",onClick:U=>a.addNewOptions(n)},[l("i",Xa,[S(C,{src:s.cbxmcratingreview_vue_var.icons_url+"icon_plus.svg"},null,8,["src"])])],8,Ya)):L("",!0)])]))),128)):L("",!0)])])):L("",!0)]),l("div",Za,[s.cbxmcratingreviewpro_active?(p(),f("div",$a,[s.form.custom_question.length>1?(p(),f("button",{key:0,type:"button",class:"button error icon icon-only icon-inline small",onClick:w=>a.deleteQuestion(n)},[l("i",tr,[S(C,{src:s.cbxmcratingreview_vue_var.icons_url+"icon_delete.svg"},null,8,["src"])]),l("span",sr,u(s.translations.buttons.delete.sr_label),1)],8,er)):L("",!0),n!==0?(p(),f("button",{key:1,type:"button",class:"button primary icon icon-only icon-inline small",onClick:w=>a.moveUpQuestion(n)},[l("i",or,[S(C,{src:s.cbxmcratingreview_vue_var.icons_url+"icon_arrow_up.svg"},null,8,["src"])]),l("span",lr,u(s.translations.buttons.delete.sr_label),1)],8,ir)):L("",!0),n!==s.form.custom_question.length-1?(p(),f("button",{key:2,type:"button",class:"button primary icon icon-only icon-inline small",onClick:w=>a.moveDownQuestion(n)},[l("i",ar,[S(C,{src:s.cbxmcratingreview_vue_var.icons_url+"icon_arrow_down.svg"},null,8,["src"])]),l("span",rr,u(s.translations.buttons.delete.sr_label),1)],8,nr)):L("",!0)])):L("",!0)]),t[24]||(t[24]=l("div",{style:{clear:"both"}},null,-1))])}),256))]),s.cbxmcratingreviewpro_active?(p(),f("div",dr,[l("label",ur,u(s.translations.choose_question_type),1),E(l("select",{id:"question_field_types_html","onUpdate:modelValue":t[5]||(t[5]=m=>s.question_type=m),class:"ml-10 mr-10"},[(p(!0),f(O,null,K(s.cbxmcratingreview_vue_var.question_field_types,(m,n)=>(p(),f("option",{value:n},u(m),9,hr))),256))],512),[[ti,s.question_type]]),l("button",{type:"button",class:"button secondary",onClick:t[6]||(t[6]=m=>a.addNewQuestion())},u(s.translations.add_new_question),1)])):(p(),f("div",cr,[l("p",null,u(s.translations.info_unlimited_question),1)]))])],2)])])])]),l("div",mr,[l("div",_r,[l("div",pr,[l("div",br,[l("h5",vr,u(s.translations.status),1),l("div",fr,[l("div",gr,[l("div",wr,[l("div",yr,[E(l("input",{type:"radio",id:"form-enabled",value:"1",class:"magic-radio","onUpdate:modelValue":t[7]||(t[7]=m=>s.form.status=m)},null,512),[[B,s.form.status]]),l("label",kr,u(s.translations.enabled),1)]),l("div",Cr,[E(l("input",{type:"radio",id:"form-disabled",value:"0",class:"magic-radio","onUpdate:modelValue":t[8]||(t[8]=m=>s.form.status=m)},null,512),[[B,s.form.status]]),l("label",xr,u(s.translations.disabled),1)])]),l("small",null,u(s.translations.enable_disable_the_form),1)])])]),l("div",Sr,[l("h5",Er,u(s.translations.auto_integration),1),l("div",qr,[l("div",Lr,[l("label",Tr,u(s.translations.enable_auto_integration)+" : ",1),l("div",Vr,[l("div",Wr,[E(l("input",{type:"radio",id:"enable_auto_integration-enabled",name:"enable_auto_integration",value:"1",class:"magic-radio","onUpdate:modelValue":t[9]||(t[9]=m=>s.form.enable_auto_integration=m)},null,512),[[B,s.form.enable_auto_integration]]),l("label",Nr,u(s.translations.enabled),1)]),l("div",Or,[E(l("input",{type:"radio",id:"enable_auto_integration-disabled",name:"enable_auto_integration",value:"0",class:"magic-radio","onUpdate:modelValue":t[10]||(t[10]=m=>s.form.enable_auto_integration=m)},null,512),[[B,s.form.enable_auto_integration]]),l("label",Ar,u(s.translations.disabled),1)])]),l("small",null,u(s.translations.enable_disable_auto_integration),1)]),l("div",Br,[l("label",Ur,u(s.translations.post_types_auto)+" : ",1),S(x,{options:a.treeselectFormatting(s.form.post_types),expandSelected:!0,isSingleSelect:!1,value:s.form.post_types_auto,modelValue:s.form.post_types_auto,"onUpdate:modelValue":t[11]||(t[11]=m=>s.form.post_types_auto=m),onInput:t[12]||(t[12]=m=>s.form.post_types_auto=m)},null,8,["options","value","modelValue"]),l("small",null,u(s.translations.enable_which_post_types_will_have),1)])])]),l("div",Pr,[l("h5",Fr,u(s.translations.question),1),l("div",Mr,[l("div",Hr,[l("label",Ir,u(s.translations.enable_question)+" : ",1),l("div",Rr,[l("div",Gr,[E(l("input",{type:"radio",id:"enable_question-enabled",value:"1",class:"magic-radio","onUpdate:modelValue":t[13]||(t[13]=m=>s.form.enable_question=m)},null,512),[[B,s.form.enable_question]]),l("label",Dr,u(s.translations.enabled),1)]),l("div",jr,[E(l("input",{type:"radio",id:"enable_question-disabled",value:"0",class:"magic-radio","onUpdate:modelValue":t[14]||(t[14]=m=>s.form.enable_question=m)},null,512),[[B,s.form.enable_question]]),l("label",Qr,u(s.translations.disabled),1)])]),l("small",null,u(s.translations.enable_question_with_rating),1)])])])])])])])]),_:1},8,["onSubmit"])])]),_:1},8,["heading"])}const wi=Ne(en,[["render",zr]]),Jr={name:"CreateForm",components:{Form:wi}};function Kr(e,t,i,o,s,a){const _=A("Form");return p(),Oe(_,{form_id:0})}const Yr=Ne(Jr,[["render",Kr]]),Xr={name:"EditForm",components:{Form:wi},data(){return{log_id:Number(this.$route.params.id)}}};function Zr(e,t,i,o,s,a){const _=A("Form");return p(),Oe(_,{log_id:s.log_id},null,8,["log_id"])}const $r=Ne(Xr,[["render",Zr]]),ec=Mi(),tc=Hi({history:ec,routes:[{path:"/form/:id",component:$r},{path:"/form/create",component:Yr},{path:"/",component:bl}]});he("requiredArray",e=>!e||e.length===0?"This field is required":!0);he("required",e=>!!e||"This field is required.");he("email",e=>/.+@.+\..+/.test(e)||"Must be a valid email.");he("minValue",(e,[t])=>parseFloat(e)>=parseFloat(t)||`The value must be at least ${t}.`);he("maxValue",(e,[t])=>parseFloat(e)<=parseFloat(t)||`The value must be no more than ${t}.`);si.defaults.headers.common["X-WP-Nonce"]=cbxmcratingreview_vue_var.rest_nonce;const sc=Ii(ji).use(Ji).use(Ki({key:"$vfm",componentName:"VueFinalModal",dynamicContainerName:"ModalsContainer"})).use(Ri,si).use(Gi).use(tc).component("inline-svg",Di).component("QuillEditor",Yi).component("Form",$i).component("Field",eo).component("ErrorMessage",to);sc.mount("#cbxmcratingreview-form-list");
