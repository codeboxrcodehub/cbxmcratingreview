import{Q as ft,R as pt,P as lt,O as ht,_ as vt,S as it,r as gt,o as K,f as Y,e as mt,T as _t,a as I,t as Z,d as nt,g as rt,F as ot,x as at,U as st,b as yt}from"./vue-router.js";var ut={exports:{}};const dt=ft(pt);(function(f){f.exports=function(h){var v={};function s(a){if(v[a])return v[a].exports;var m=v[a]={i:a,l:!1,exports:{}};return h[a].call(m.exports,m,m.exports,s),m.l=!0,m.exports}return s.m=h,s.c=v,s.d=function(a,m,w){s.o(a,m)||Object.defineProperty(a,m,{enumerable:!0,get:w})},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},s.t=function(a,m){if(m&1&&(a=s(a)),m&8||m&4&&typeof a=="object"&&a&&a.__esModule)return a;var w=Object.create(null);if(s.r(w),Object.defineProperty(w,"default",{enumerable:!0,value:a}),m&2&&typeof a!="string")for(var u in a)s.d(w,u,(function(O){return a[O]}).bind(null,u));return w},s.n=function(a){var m=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(m,"a",m),m},s.o=function(a,m){return Object.prototype.hasOwnProperty.call(a,m)},s.p="",s(s.s="fb15")}({"0a04":function(h,v,s){var a=s("4bad");v=a(!1),v.push([h.i,".vue-star-rating-star[data-v-f675a548]{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.vue-star-rating-pointer[data-v-f675a548]{cursor:pointer}.vue-star-rating[data-v-f675a548]{display:flex;align-items:center}.vue-star-rating-inline[data-v-f675a548]{display:inline-flex}.vue-star-rating-rating-text[data-v-f675a548]{margin-left:7px}.vue-star-rating-rtl[data-v-f675a548]{direction:rtl}.vue-star-rating-rtl .vue-star-rating-rating-text[data-v-f675a548]{margin-right:10px;direction:rtl}.sr-only[data-v-f675a548]{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}",""]),h.exports=v},"0fde":function(h,v,s){var a=s("4bad");v=a(!1),v.push([h.i,".vue-star-rating-star[data-v-11edf2d6]{overflow:visible!important}.vue-star-rating-star-rotate[data-v-11edf2d6]{transition:all .25s}.vue-star-rating-star-rotate[data-v-11edf2d6]:hover{transition:transform .25s;transform:rotate(-15deg) scale(1.3)}",""]),h.exports=v},"499e":function(h,v,s){s.r(v),s.d(v,"default",function(){return N});function a(p,c){for(var d=[],x={},_=0;_<c.length;_++){var g=c[_],E=g[0],V=g[1],H=g[2],i=g[3],t={id:p+":"+_,css:V,media:H,sourceMap:i};x[E]?x[E].parts.push(t):d.push(x[E]={id:E,parts:[t]})}return d}var m=typeof document<"u";if(typeof DEBUG<"u"&&DEBUG&&!m)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var w={},u=m&&(document.head||document.getElementsByTagName("head")[0]),O=null,P=0,D=!1,M=function(){},j=null,W="data-vue-ssr-id",U=typeof navigator<"u"&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function N(p,c,d,x){D=d,j=x||{};var _=a(p,c);return q(_),function(E){for(var V=[],H=0;H<_.length;H++){var i=_[H],t=w[i.id];t.refs--,V.push(t)}E?(_=a(p,E),q(_)):_=[];for(var H=0;H<V.length;H++){var t=V[H];if(t.refs===0){for(var e=0;e<t.parts.length;e++)t.parts[e]();delete w[t.id]}}}}function q(p){for(var c=0;c<p.length;c++){var d=p[c],x=w[d.id];if(x){x.refs++;for(var _=0;_<x.parts.length;_++)x.parts[_](d.parts[_]);for(;_<d.parts.length;_++)x.parts.push(T(d.parts[_]));x.parts.length>d.parts.length&&(x.parts.length=d.parts.length)}else{for(var g=[],_=0;_<d.parts.length;_++)g.push(T(d.parts[_]));w[d.id]={id:d.id,refs:1,parts:g}}}}function Q(){var p=document.createElement("style");return p.type="text/css",u.appendChild(p),p}function T(p){var c,d,x=document.querySelector("style["+W+'~="'+p.id+'"]');if(x){if(D)return M;x.parentNode.removeChild(x)}if(U){var _=P++;x=O||(O=Q()),c=$.bind(null,x,_,!1),d=$.bind(null,x,_,!0)}else x=Q(),c=y.bind(null,x),d=function(){x.parentNode.removeChild(x)};return c(p),function(E){if(E){if(E.css===p.css&&E.media===p.media&&E.sourceMap===p.sourceMap)return;c(p=E)}else d()}}var z=function(){var p=[];return function(c,d){return p[c]=d,p.filter(Boolean).join(`
`)}}();function $(p,c,d,x){var _=d?"":x.css;if(p.styleSheet)p.styleSheet.cssText=z(c,_);else{var g=document.createTextNode(_),E=p.childNodes;E[c]&&p.removeChild(E[c]),E.length?p.insertBefore(g,E[c]):p.appendChild(g)}}function y(p,c){var d=c.css,x=c.media,_=c.sourceMap;if(x&&p.setAttribute("media",x),j.ssrId&&p.setAttribute(W,c.id),_&&(d+=`
/*# sourceURL=`+_.sources[0]+" */",d+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(_))))+" */"),p.styleSheet)p.styleSheet.cssText=d;else{for(;p.firstChild;)p.removeChild(p.firstChild);p.appendChild(document.createTextNode(d))}}},"4bad":function(h,v,s){h.exports=function(w){var u=[];return u.toString=function(){return this.map(function(P){var D=a(P,w);return P[2]?"@media ".concat(P[2]," {").concat(D,"}"):D}).join("")},u.i=function(O,P,D){typeof O=="string"&&(O=[[null,O,""]]);var M={};if(D)for(var j=0;j<this.length;j++){var W=this[j][0];W!=null&&(M[W]=!0)}for(var U=0;U<O.length;U++){var N=[].concat(O[U]);D&&M[N[0]]||(P&&(N[2]?N[2]="".concat(P," and ").concat(N[2]):N[2]=P),u.push(N))}},u};function a(w,u){var O=w[1]||"",P=w[3];if(!P)return O;if(u&&typeof btoa=="function"){var D=m(P),M=P.sources.map(function(j){return"/*# sourceURL=".concat(P.sourceRoot||"").concat(j," */")});return[O].concat(M).concat([D]).join(`
`)}return[O].join(`
`)}function m(w){var u=btoa(unescape(encodeURIComponent(JSON.stringify(w)))),O="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(u);return"/*# ".concat(O," */")}},"5bef":function(h,v,s){var a=s("0fde");typeof a=="string"&&(a=[[h.i,a,""]]),a.locals&&(h.exports=a.locals);var m=s("499e").default;m("f426be92",a,!0,{sourceMap:!1,shadowMode:!1})},8875:function(h,v,s){var a,m,w;(function(u,O){m=[],a=O,w=typeof a=="function"?a.apply(v,m):a,w!==void 0&&(h.exports=w)})(typeof self<"u"?self:this,function(){function u(){var O=Object.getOwnPropertyDescriptor(document,"currentScript");if(!O&&"currentScript"in document&&document.currentScript||O&&O.get!==u&&document.currentScript)return document.currentScript;try{throw new Error}catch($){var P=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,D=/@([^@]*):(\d+):(\d+)\s*$/ig,M=P.exec($.stack)||D.exec($.stack),j=M&&M[1]||!1,W=M&&M[2]||!1,U=document.location.href.replace(document.location.hash,""),N,q,Q,T=document.getElementsByTagName("script");j===U&&(N=document.documentElement.outerHTML,q=new RegExp("(?:[^\\n]+?\\n){0,"+(W-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),Q=N.replace(q,"$1").trim());for(var z=0;z<T.length;z++)if(T[z].readyState==="interactive"||T[z].src===j||j===U&&T[z].innerHTML&&T[z].innerHTML.trim()===Q)return T[z];return null}}return u})},"8bbf":function(h,v){h.exports=dt},"9ff5":function(h,v,s){s("eed3")},d1b1:function(h,v,s){s("5bef")},d4aa:function(h,v){class s{constructor(m){this.color=m}parseAlphaColor(){return/^rgba\((\d{1,3}%?\s*,\s*){3}(\d*(?:\.\d+)?)\)$/.test(this.color)?this.parseRgba():/^hsla\(\d+\s*,\s*([\d.]+%\s*,\s*){2}(\d*(?:\.\d+)?)\)$/.test(this.color)?this.parseHsla():/^#([0-9A-Fa-f]{4}|[0-9A-Fa-f]{8})$/.test(this.color)?this.parseAlphaHex():/^transparent$/.test(this.color)?this.parseTransparent():{color:this.color,opacity:"1"}}parseRgba(){return{color:this.color.replace(/,(?!.*,).*(?=\))|a/g,""),opacity:this.color.match(/\.\d+|[01](?=\))/)[0]}}parseHsla(){return{color:this.color.replace(/,(?!.*,).*(?=\))|a/g,""),opacity:this.color.match(/\.\d+|[01](?=\))/)[0]}}parseAlphaHex(){return{color:this.color.length===5?this.color.substring(0,4):this.color.substring(0,7),opacity:this.color.length===5?(parseInt(this.color.substring(4,5)+this.color.substring(4,5),16)/255).toFixed(2):(parseInt(this.color.substring(7,9),16)/255).toFixed(2)}}parseTransparent(){return{color:"#fff",opacity:0}}}h.exports=s},eed3:function(h,v,s){var a=s("0a04");typeof a=="string"&&(a=[[h.i,a,""]]),a.locals&&(h.exports=a.locals);var m=s("499e").default;m("87bea518",a,!0,{sourceMap:!1,shadowMode:!1})},fb15:function(h,v,s){if(s.r(v),typeof window<"u"){var a=window.document.currentScript;{var m=s("8875");a=m(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:m})}var w=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);w&&(s.p=w[1])}var u=s("8bbf");const O=Object(u.withScopeId)("data-v-f675a548");Object(u.pushScopeId)("data-v-f675a548");const P={class:"sr-only"};Object(u.popScopeId)();const D=O(function(p,c,d,x,_,g){const E=Object(u.resolveComponent)("star");return Object(u.openBlock)(),Object(u.createBlock)("div",{class:["vue-star-rating",{"vue-star-rating-rtl":d.rtl},{"vue-star-rating-inline":d.inline}]},[Object(u.createVNode)("div",P,[Object(u.renderSlot)(p.$slots,"screen-reader",{rating:_.selectedRating,stars:d.maxRating},()=>[Object(u.createVNode)("span",null,"Rated "+Object(u.toDisplayString)(_.selectedRating)+" stars out of "+Object(u.toDisplayString)(d.maxRating),1)])]),Object(u.createVNode)("div",{class:"vue-star-rating",onMouseleave:c[2]||(c[2]=(...V)=>g.resetRating(...V))},[(Object(u.openBlock)(!0),Object(u.createBlock)(u.Fragment,null,Object(u.renderList)(d.maxRating,V=>(Object(u.openBlock)(),Object(u.createBlock)("span",{key:V,class:[{"vue-star-rating-pointer":!d.readOnly},"vue-star-rating-star"],style:{"margin-right":g.margin+"px"}},[Object(u.createVNode)(E,{fill:_.fillLevel[V-1],size:d.starSize,points:d.starPoints,"star-id":V,step:_.step,"active-color":g.currentActiveColor,"inactive-color":d.inactiveColor,"border-color":d.borderColor,"active-border-color":g.currentActiveBorderColor,"border-width":d.borderWidth,"rounded-corners":d.roundedCorners,rtl:d.rtl,glow:d.glow,"glow-color":d.glowColor,animate:d.animate,"onStar-selected":c[1]||(c[1]=H=>g.setRating(H,!0)),"onStar-mouse-move":g.setRating},null,8,["fill","size","points","star-id","step","active-color","inactive-color","border-color","active-border-color","border-width","rounded-corners","rtl","glow","glow-color","animate","onStar-mouse-move"])],6))),128)),d.showRating?(Object(u.openBlock)(),Object(u.createBlock)("span",{key:0,class:["vue-star-rating-rating-text",d.textClass]},Object(u.toDisplayString)(g.formattedRating),3)):Object(u.createCommentVNode)("",!0)],32)],2)}),M=Object(u.withScopeId)("data-v-11edf2d6");Object(u.pushScopeId)("data-v-11edf2d6");const j=Object(u.createVNode)("feMerge",null,[Object(u.createVNode)("feMergeNode",{in:"coloredBlur"}),Object(u.createVNode)("feMergeNode",{in:"SourceGraphic"})],-1);Object(u.popScopeId)();const W=M(function(p,c,d,x,_,g){return Object(u.openBlock)(),Object(u.createBlock)("svg",{class:["vue-star-rating-star",{"vue-star-rating-star-rotate":g.shouldAnimate}],height:g.starSize,width:g.starSize,viewBox:g.viewBox,onMousemove:c[1]||(c[1]=(...E)=>g.mouseMoving(...E)),onClick:c[2]||(c[2]=(...E)=>g.selected(...E)),onTouchstart:c[3]||(c[3]=(...E)=>g.touchStart(...E)),onTouchend:c[4]||(c[4]=(...E)=>g.touchEnd(...E))},[Object(u.createVNode)("linearGradient",{id:_.grad,x1:"0",x2:"100%",y1:"0",y2:"0"},[Object(u.createVNode)("stop",{offset:g.starFill,"stop-color":d.rtl?g.getColor(d.inactiveColor):g.getColor(d.activeColor),"stop-opacity":d.rtl?g.getOpacity(d.inactiveColor):g.getOpacity(d.activeColor)},null,8,["offset","stop-color","stop-opacity"]),Object(u.createVNode)("stop",{offset:g.starFill,"stop-color":d.rtl?g.getColor(d.activeColor):g.getColor(d.inactiveColor),"stop-opacity":d.rtl?g.getOpacity(d.activeColor):g.getOpacity(d.inactiveColor)},null,8,["offset","stop-color","stop-opacity"])],8,["id"]),Object(u.createVNode)("filter",{id:_.glowId,height:"130%",width:"130%",filterUnits:"userSpaceOnUse"},[Object(u.createVNode)("feGaussianBlur",{stdDeviation:d.glow,result:"coloredBlur"},null,8,["stdDeviation"]),j],8,["id"]),Object(u.withDirectives)(Object(u.createVNode)("polygon",{points:g.starPointsToString,fill:g.gradId,stroke:d.glowColor,filter:"url(#"+_.glowId+")","stroke-width":g.border},null,8,["points","fill","stroke","filter","stroke-width"]),[[u.vShow,d.glowColor&&d.glow>0&&d.fill>0]]),Object(u.createVNode)("polygon",{points:g.starPointsToString,fill:g.gradId,stroke:g.getBorderColor,"stroke-width":g.border,"stroke-linejoin":g.strokeLinejoin},null,8,["points","fill","stroke","stroke-width","stroke-linejoin"]),Object(u.createVNode)("polygon",{points:g.starPointsToString,fill:g.gradId},null,8,["points","fill"])],42,["height","width","viewBox"])});var U=s("d4aa"),N=s.n(U),q={name:"Star",props:{fill:{type:Number,default:0},points:{type:Array,default(){return[]}},size:{type:Number,default:50},starId:{type:Number,required:!0},activeColor:{type:String,required:!0},inactiveColor:{type:String,required:!0},borderColor:{type:String,default:"#000"},activeBorderColor:{type:String,default:"#000"},borderWidth:{type:Number,default:0},roundedCorners:{type:Boolean,default:!1},rtl:{type:Boolean,default:!1},glow:{type:Number,default:0},glowColor:{type:String,default:null,required:!1},animate:{type:Boolean,default:!1}},emits:["star-mouse-move","star-selected"],data(){return{starPoints:[19.8,2.2,6.6,43.56,39.6,17.16,0,17.16,33,43.56],grad:"",glowId:"",isStarActive:!0}},computed:{starPointsToString(){return this.starPoints.join(",")},gradId(){return"url(#"+this.grad+")"},starSize(){const y=this.roundedCorners&&this.borderWidth<=0?parseInt(this.size)-parseInt(this.border):this.size;return parseInt(y)+parseInt(this.border)},starFill(){return this.rtl?100-this.fill+"%":this.fill+"%"},border(){return this.roundedCorners&&this.borderWidth<=0?6:this.borderWidth},getBorderColor(){return this.roundedCorners&&this.borderWidth<=0?this.fill<=0?this.inactiveColor:this.activeColor:this.fill<=0?this.borderColor:this.activeBorderColor},maxSize(){return this.starPoints.reduce(function(y,p){return Math.max(y,p)})},viewBox(){return"0 0 "+this.maxSize+" "+this.maxSize},shouldAnimate(){return this.animate&&this.isStarActive},strokeLinejoin(){return this.roundedCorners?"round":"miter"}},created(){this.starPoints=this.points.length?this.points:this.starPoints,this.calculatePoints(),this.grad=this.getRandomId(),this.glowId=this.getRandomId()},methods:{mouseMoving(y){y.touchAction!=="undefined"&&this.$emit("star-mouse-move",{event:y,position:this.getPosition(y),id:this.starId})},touchStart(){this.$nextTick(()=>{this.isStarActive=!0})},touchEnd(){this.$nextTick(()=>{this.isStarActive=!1})},getPosition(y){var p=.92*this.size;const c=this.rtl?Math.min(y.offsetX,45):Math.max(y.offsetX,1);var d=Math.round(100/p*c);return Math.min(d,100)},selected(y){this.$emit("star-selected",{id:this.starId,position:this.getPosition(y)})},getRandomId(){return Math.random().toString(36).substring(7)},calculatePoints(){this.starPoints=this.starPoints.map((y,p)=>{const c=p%2===0?this.border*1.5:0;return this.size/this.maxSize*y+c})},getColor(y){return new N.a(y).parseAlphaColor().color},getOpacity(y){return new N.a(y).parseAlphaColor().opacity}}};s("d1b1"),q.render=W,q.__scopeId="data-v-11edf2d6";var Q=q,T={name:"VueStarRating",components:{Star:Q},props:{increment:{type:Number,default:1},rating:{type:Number,default:0},roundStartRating:{type:Boolean,default:!0},activeColor:{type:[String,Array],default:"#ffd055"},inactiveColor:{type:String,default:"#d8d8d8"},maxRating:{type:Number,default:5},starPoints:{type:Array,default(){return[]}},starSize:{type:Number,default:50},showRating:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1},textClass:{type:String,default:""},inline:{type:Boolean,default:!1},borderColor:{type:String,default:"#999"},activeBorderColor:{type:[String,Array],default:null},borderWidth:{type:Number,default:0},roundedCorners:{type:Boolean,default:!1},padding:{type:Number,default:0},rtl:{type:Boolean,default:!1},fixedPoints:{type:Number,default:null},glow:{type:Number,default:0},glowColor:{type:String,default:"#fff"},clearable:{type:Boolean,default:!1},activeOnClick:{type:Boolean,default:!1},animate:{type:Boolean,default:!1}},emits:["update:rating","hover:rating"],data(){return{step:0,fillLevel:[],currentRating:0,selectedRating:0,ratingSelected:!1}},computed:{formattedRating(){return this.fixedPoints===null?this.currentRating:this.currentRating.toFixed(this.fixedPoints)},shouldRound(){return this.ratingSelected||this.roundStartRating},margin(){return this.padding+this.borderWidth},activeColors(){return Array.isArray(this.activeColor)?this.padColors(this.activeColor,this.maxRating,this.activeColor.slice(-1)[0]):new Array(this.maxRating).fill(this.activeColor)},currentActiveColor(){return this.activeOnClick?this.selectedRating>0?this.activeColors[Math.ceil(this.selectedRating)-1]:this.inactiveColor:this.currentRating>0?this.activeColors[Math.ceil(this.currentRating)-1]:this.inactiveColor},activeBorderColors(){if(Array.isArray(this.activeBorderColor))return this.padColors(this.activeBorderColor,this.maxRating,this.activeBorderColor.slice(-1)[0]);let y=this.activeBorderColor?this.activeBorderColor:this.borderColor;return new Array(this.maxRating).fill(y)},currentActiveBorderColor(){return this.activeOnClick?this.selectedRating>0?this.activeBorderColors[Math.ceil(this.selectedRating)-1]:this.borderColor:this.currentRating>0?this.activeBorderColors[Math.ceil(this.currentRating)-1]:this.borderColor}},watch:{rating(y){this.currentRating=y,this.selectedRating=y,this.createStars(this.shouldRound)}},created(){this.step=this.increment*100,this.currentRating=this.rating,this.selectedRating=this.currentRating,this.createStars(this.roundStartRating)},methods:{setRating(y,p){if(!this.readOnly){const c=this.rtl?(100-y.position)/100:y.position/100;this.currentRating=(y.id+c-1).toFixed(2),this.currentRating=this.currentRating>this.maxRating?this.maxRating:this.currentRating,p?(this.createStars(!0,!0),this.clearable&&this.currentRating===this.selectedRating?this.selectedRating=0:this.selectedRating=this.currentRating,this.$emit("update:rating",this.selectedRating),this.ratingSelected=!0):(this.createStars(!0,!this.activeOnClick),this.$emit("hover:rating",this.currentRating))}},resetRating(){this.readOnly||(this.currentRating=this.selectedRating,this.createStars(this.shouldRound))},createStars(y=!0,p=!0){y&&this.round();for(var c=0;c<this.maxRating;c++){let d=0;c<this.currentRating&&(d=this.currentRating-c>1?100:(this.currentRating-c)*100),p&&(this.fillLevel[c]=Math.round(d))}},round(){var y=1/this.increment;this.currentRating=Math.min(this.maxRating,Math.ceil(this.currentRating*y)/y)},padColors(y,p,c){return Object.assign(new Array(p).fill(c),y)}}};s("9ff5"),T.render=D,T.__scopeId="data-v-f675a548";var z=T,$=z;v.default=$}})})(ut);var bt=ut.exports;const qt=lt(bt);var ct={exports:{}};/*!
 Name: vue-upload-component 
Component URI: https://github.com/lian-yue/vue-upload-component#readme 
Version: 3.1.16 
Author: LianYue 
License: Apache-2.0 
Description: Vue.js file upload component, Multi-file upload, Upload directory, Drag upload, Drag the directory, Upload multiple files at the same time, html4 (IE 9), `PUT` method, Customize the filter 
 */(function(f,h){(function(v,s){f.exports=s(dt)})(ht,function(v){function s(i){return u(i)||w(i)||m(i)||a()}function a(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(i,t){if(i){if(typeof i=="string")return O(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return O(i,t)}}function w(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function u(i){if(Array.isArray(i))return O(i)}function O(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function P(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,r)}return e}function D(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?P(Object(e),!0).forEach(function(r){M(i,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):P(Object(e)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(e,r))})}return i}function M(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function j(i){"@babel/helpers - typeof";return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(i)}function W(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,r)}return e}function U(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?W(Object(e),!0).forEach(function(r){T(i,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):W(Object(e)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(e,r))})}return i}function N(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function q(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Q(i,t,e){return t&&q(i.prototype,t),e&&q(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function T(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var z=function(t){var e=new XMLHttpRequest;return e.open(t.method||"GET",t.url),e.responseType="json",t.headers&&Object.keys(t.headers).forEach(function(r){e.setRequestHeader(r,t.headers[r])}),e},$=function(t,e){return new Promise(function(r,n){t.onload=function(){if(t.status>=200&&t.status<300){var o;try{o=JSON.parse(t.response)}catch{o=t.response}r(o)}else n(t.response)},t.onerror=function(){return n(t.response)},t.send(JSON.stringify(e))})},y=function(t,e){var r=new FormData;for(var n in e)r.append(n,e[n]);return new Promise(function(o,l){t.onload=function(){if(t.status>=200&&t.status<300){var b;try{b=JSON.parse(t.response)}catch{b=t.response}o(b)}else l(t.response)},t.onerror=function(){return l(t.response)},t.send(r)})};function p(i){var t=z(i);return $(t,i.body)}var c=function(){function i(t,e){N(this,i),this.file=t,this.options=e,this.chunks=[],this.sessionId=null,this.chunkSize=null,this.speedInterval=null}return Q(i,[{key:"maxRetries",get:function(){return parseInt(this.options.maxRetries,10)}},{key:"maxActiveChunks",get:function(){return parseInt(this.options.maxActive,10)}},{key:"fileType",get:function(){return this.file.type}},{key:"fileSize",get:function(){return this.file.size}},{key:"fileName",get:function(){return this.file.name}},{key:"action",get:function(){return this.options.action||null}},{key:"startBody",get:function(){return this.options.startBody||{}}},{key:"uploadBody",get:function(){return this.options.uploadBody||{}}},{key:"finishBody",get:function(){return this.options.finishBody||{}}},{key:"headers",get:function(){return this.options.headers||{}}},{key:"readyToUpload",get:function(){return!!this.chunks}},{key:"progress",get:function(){var e=this,r=this.chunksUploaded.length/this.chunks.length*100,n=this.chunksUploading.reduce(function(o,l){return o+(l.progress|0)/e.chunks.length},0);return Math.min(r+n,100)}},{key:"chunksToUpload",get:function(){return this.chunks.filter(function(e){return!e.active&&!e.uploaded})}},{key:"hasChunksToUpload",get:function(){return this.chunksToUpload.length>0}},{key:"chunksUploading",get:function(){return this.chunks.filter(function(e){return!!e.xhr&&!!e.active})}},{key:"chunksUploaded",get:function(){return this.chunks.filter(function(e){return!!e.uploaded})}},{key:"createChunks",value:function(){this.chunks=[];for(var e=0,r=this.chunkSize;e<this.fileSize;)this.chunks.push({blob:this.file.file.slice(e,r),startOffset:e,active:!1,retries:this.maxRetries}),e=r,r=e+this.chunkSize}},{key:"updateFileProgress",value:function(){this.file.progress=this.progress}},{key:"pause",value:function(){this.file.active=!1,this.stopChunks()}},{key:"stopChunks",value:function(){this.chunksUploading.forEach(function(e){e.xhr.abort(),e.active=!1}),this.stopSpeedCalc()}},{key:"resume",value:function(){this.file.active=!0,this.startChunking()}},{key:"upload",value:function(){var e=this;return this.promise=new Promise(function(r,n){e.resolve=r,e.reject=n}),this.start(),this.promise}},{key:"start",value:function(){var e=this;p({method:"POST",headers:U(U({},this.headers),{},{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.startBody,{phase:"start",mime_type:this.fileType,size:this.fileSize,name:this.fileName})}).then(function(r){if(r.status!=="success")return e.file.response=r,e.reject("server");e.sessionId=r.data.session_id,e.chunkSize=r.data.end_offset,e.createChunks(),e.startChunking()}).catch(function(r){e.file.response=r,e.reject("server")})}},{key:"startChunking",value:function(){for(var e=0;e<this.maxActiveChunks;e++)this.uploadNextChunk();this.startSpeedCalc()}},{key:"uploadNextChunk",value:function(){if(this.file.active){if(this.hasChunksToUpload)return this.uploadChunk(this.chunksToUpload[0]);if(this.chunksUploading.length===0)return this.finish()}}},{key:"uploadChunk",value:function(e){var r=this;e.progress=0,e.active=!0,this.updateFileProgress(),e.xhr=z({method:"POST",headers:this.headers,url:this.action}),e.xhr.upload.addEventListener("progress",function(n){n.lengthComputable&&(e.progress=Math.round(n.loaded/n.total*100))},!1),y(e.xhr,Object.assign(this.uploadBody,{phase:"upload",session_id:this.sessionId,start_offset:e.startOffset,chunk:e.blob})).then(function(n){if(e.active=!1,n.status==="success")e.uploaded=!0;else if(e.retries--<=0)return r.stopChunks(),r.reject("upload");r.uploadNextChunk()}).catch(function(){if(e.active=!1,e.retries--<=0)return r.stopChunks(),r.reject("upload");r.uploadNextChunk()})}},{key:"finish",value:function(){var e=this;this.updateFileProgress(),this.stopSpeedCalc(),p({method:"POST",headers:U(U({},this.headers),{},{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.finishBody,{phase:"finish",session_id:this.sessionId})}).then(function(r){if(e.file.response=r,r.status!=="success")return e.reject("server");e.resolve(r)}).catch(function(r){e.file.response=r,e.reject("server")})}},{key:"startSpeedCalc",value:function(){var e=this;this.file.speed=0;var r=0;this.speedInterval||(this.speedInterval=window.setInterval(function(){var n=e.progress/100*e.fileSize;e.file.speed=n-r,r=n},1e3))}},{key:"stopSpeedCalc",value:function(){this.speedInterval&&window.clearInterval(this.speedInterval),this.speedInterval=null,this.file.speed=0}}]),i}(),d={headers:{},action:"",minSize:1048576,maxActive:3,maxRetries:5,handler:c},x=v.defineComponent({compatConfig:{MODE:3},props:{inputId:{type:String},name:{type:String,default:"file"},accept:{type:String},capture:{},disabled:{default:!1},multiple:{type:Boolean,default:!1},maximum:{type:Number},addIndex:{type:[Boolean,Number]},directory:{type:Boolean},createDirectory:{type:Boolean,default:!1},postAction:{type:String},putAction:{type:String},customAction:{type:Function},headers:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},timeout:{type:Number,default:0},drop:{type:[Boolean,String,HTMLElement],default:function(){return!1}},dropDirectory:{type:Boolean,default:!0},size:{type:Number,default:0},extensions:{type:[RegExp,String,Array],default:function(){return[]}},modelValue:{type:Array,default:function(){return[]}},thread:{type:Number,default:1},chunkEnabled:{type:Boolean,default:!1},chunk:{type:Object,default:function(){return d}}},emits:["update:modelValue","input-filter","input-file"],data:function(){return{files:this.modelValue,features:{html5:!0,directory:!1,drop:!1},active:!1,dropActive:!1,dropElementActive:!1,uploading:0,destroy:!1,maps:{},dropElement:null,dropTimeout:null,reload:!1}},mounted:function(){var t=this,e=document.createElement("input");if(e.type="file",e.multiple=!0,window.FormData&&e.files?((typeof e.webkitdirectory=="boolean"||typeof e.directory=="boolean")&&(this.features.directory=!0),this.features.html5&&typeof e.ondrop<"u"&&this.isRelatedTargetSupported()&&(this.features.drop=!0)):this.features.html5=!1,this.maps={},this.files)for(var r=0;r<this.files.length;r++){var n=this.files[r];this.maps[n.id]=n}this.$nextTick(function(){t.$parent?(t.$parent.$forceUpdate(),t.$parent.$nextTick(function(){t.watchDrop(t.drop)})):t.watchDrop(t.drop)})},beforeUnmount:function(){this.destroy=!0,this.active=!1,this.watchDrop(!1),this.watchActive(!1)},computed:{uploaded:function(){for(var t,e=0;e<this.files.length;e++)if(t=this.files[e],t.fileObject&&!t.error&&!t.success)return!1;return!0},chunkOptions:function(){return Object.assign(d,this.chunk)},className:function(){return["file-uploads",this.features.html5?"file-uploads-html5":"file-uploads-html4",this.features.directory&&this.directory?"file-uploads-directory":void 0,this.features.drop&&this.drop?"file-uploads-drop":void 0,this.disabled?"file-uploads-disabled":void 0]},forId:function(){return this.inputId||this.name},iMaximum:function(){return this.maximum===void 0?this.multiple?0:1:this.maximum},iExtensions:function(){if(this.extensions){if(this.extensions instanceof RegExp)return this.extensions;if(this.extensions.length){var t=[];return typeof this.extensions=="string"?t=this.extensions.split(","):t=this.extensions,t=t.map(function(e){return e.trim()}).filter(function(e){return e}),new RegExp("\\.("+t.join("|").replace(/\./g,"\\.")+")$","i")}}},iDirectory:function(){if(this.directory&&this.features.directory)return!0}},watch:{active:function(t){this.watchActive(t)},dropActive:function(t){this.watchDropActive(t),this.$parent&&this.$parent.$forceUpdate()},drop:function(t){this.watchDrop(t)},modelValue:function(t){if(this.files!==t){this.files=t;var e=this.maps;this.maps={};for(var r=0;r<this.files.length;r++){var n=this.files[r];this.maps[n.id]=n}for(var o in this.maps){var l=this.maps[o],b=e[o];l!==b&&this.emitFile(l,b)}for(var k in e)this.maps[k]||this.emitFile(void 0,e[k])}}},methods:{newId:function(){return Math.random().toString(36).substr(2)},clear:function(){if(this.files.length){var t=this.files;this.files=[],this.maps={},this.emitInput();for(var e=0;e<t.length;e++)this.emitFile(void 0,t[e])}return!0},get:function(t){return t?j(t)==="object"?this.maps[t.id||""]||!1:this.maps[t]||!1:!1},add:function(t,e){var r;t instanceof Array?r=t:r=[t],e===void 0&&(e=this.addIndex);for(var n=[],o=0;o<r.length;o++){var l=r[o];this.features.html5&&l instanceof Blob&&(l={id:"",file:l,size:l.size,name:l.webkitRelativePath||l.relativePath||l.name||"unknown",type:l.type}),l=l;var b=!1;if(l.fileObject===!1||(l.fileObject||typeof Element<"u"&&l.el instanceof HTMLInputElement||typeof Blob<"u"&&l.file instanceof Blob)&&(b=!0),b&&(l=D(D({fileObject:!0,size:-1,name:"Filename",type:"",active:!1,error:"",success:!1,putAction:this.putAction,postAction:this.postAction,timeout:this.timeout},l),{},{response:{},progress:"0.00",speed:0}),l.data=D(D({},this.data),l.data?l.data:{}),l.headers=D(D({},this.headers),l.headers?l.headers:{})),l.id||(l.id=this.newId()),!this.emitFilter(l,void 0)&&(this.iMaximum>1&&n.length+this.files.length>=this.iMaximum||(n.push(l),this.iMaximum===1)))break}if(n.length){this.iMaximum===1&&this.clear();var k;if(e===!0||e===0)k=n.concat(this.files);else if(e){var A;k=this.files.concat([]),(A=k).splice.apply(A,[e,0].concat(s(n)))}else k=this.files.concat(n);this.files=k;var S=0;e===!0||e===0?S=0:e?e>=0?e+n.length>this.files.length?S=this.files.length-n.length:S=e:(S=this.files.length-n.length+e,S<0&&(S=0)):S=this.files.length-n.length,n=this.files.slice(S,S+n.length);for(var B=0;B<n.length;B++){var C=n[B];this.maps[C.id]=C}this.emitInput();for(var R=0;R<n.length;R++)this.emitFile(n[R],void 0);return t instanceof Array?n:n[0]}},addInputFile:function(t){var e=this,r=[];this.iMaximum;var n=t.webkitEntries||t.entries||void 0;if(n!=null&&n.length)return this.getFileSystemEntry(n).then(function(k){return e.add(k)});if(t.files)for(var o=0;o<t.files.length;o++){var l=t.files[o];r.push({id:"",size:l.size,name:l.webkitRelativePath||l.relativePath||l.name,type:l.type,file:l})}else{var b=t.value.replace(/\\/g,"/").split("/");(!b||!b.length)&&(b=[t.value]),delete t.__vuex__,r.push({id:"",name:b[b.length-1],el:t})}return Promise.resolve(this.add(r))},addDataTransfer:function(t){var e,r=this;if(t!=null&&(e=t.items)!==null&&e!==void 0&&e.length){for(var n=[],o=0;o<t.items.length;o++){var l=t.items[o],b=void 0;l.getAsEntry?b=l.getAsEntry()||l.getAsFile():l.webkitGetAsEntry?b=l.webkitGetAsEntry()||l.getAsFile():b=l.getAsFile(),b&&n.push(b)}return this.getFileSystemEntry(n).then(function(B){return r.add(B)})}var k=this.iMaximum,A=[];if(t.files.length){for(var S=0;S<t.files.length&&(A.push(t.files[S]),!(k>0&&A.length>=k));S++);return Promise.resolve(this.add(A))}return Promise.resolve([])},getFileSystemEntry:function(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise(function(n){var o=e.iMaximum;if(!t){n([]);return}if(t instanceof Array){var l=[],b=function R(X){var G=t[X];if(!G||o>0&&l.length>=o)return n(l);e.getFileSystemEntry(G,r).then(function(L){l.push.apply(l,s(L)),R(X+1)})};b(0);return}if(t instanceof Blob){n([{id:"",size:t.size,name:r+t.name,type:t.type,file:t}]);return}if(t.isFile){var k=t;k.file(function(R){n([{id:"",size:R.size,name:r+R.name,type:R.type,file:R}])});return}if(t.isDirectory&&e.dropDirectory){var A=t,S=[];e.createDirectory&&S.push({id:"",name:r+A.name,size:0,type:"text/directory",file:new File([],r+A.name,{type:"text/directory"})});var B=A.createReader(),C=function R(){B.readEntries(function(X){var G=function L(F){if(!X[F]&&F===0||o>0&&S.length>=o)return n(S);if(!X[F])return R();e.getFileSystemEntry(X[F],r+A.name+"/").then(function(et){S.push.apply(S,s(et)),L(F+1)})};G(0)})};C();return}n([])})},replace:function(t,e){var r=this.get(t),n=this.get(e);if(!r||!n||r===n)return!1;var o=this.files.concat([]),l=o.indexOf(r),b=o.indexOf(n);return l===-1||b===-1?!1:(o[l]=n,o[b]=r,this.files=o,this.emitInput(),!0)},remove:function(t){var e=this.get(t);if(e){if(this.emitFilter(void 0,e))return!1;var r=this.files.concat([]),n=r.indexOf(e);if(n===-1)return console.error("remove",e),!1;r.splice(n,1),this.files=r,delete this.maps[e.id],this.emitInput(),this.emitFile(void 0,e)}return e},update:function(t,e){var r=this.get(t);if(r){var n=D(D({},r),e);if(r.fileObject&&r.active&&!n.active&&!n.error&&!n.success&&(n.error="abort"),this.emitFilter(n,r))return!1;var o=this.files.concat([]),l=o.indexOf(r);return l===-1?(console.error("update",r),!1):(o.splice(l,1,n),this.files=o,n=this.files[l],delete this.maps[r.id],this.maps[n.id]=n,this.emitInput(),this.emitFile(n,r),n)}return!1},emitFilter:function(t,e){var r=!1;return this.$emit("input-filter",t,e,function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r=n,r}),r},emitFile:function(t,e){var r,n=this;this.$emit("input-file",t,e),(r=t)!==null&&r!==void 0&&r.fileObject&&t.active&&(!e||!e.active)?(this.uploading++,this.$nextTick(function(){setTimeout(function(){t&&n.upload(t).then(function(){var o;t&&(t=n.get(t)||void 0),(o=t)!==null&&o!==void 0&&o.fileObject&&n.update(t,{active:!1,success:!t.error})}).catch(function(o){t&&n.update(t,{active:!1,success:!1,error:o.code||o.error||o.message||o})})},Math.ceil(Math.random()*50+50))})):(!t||!t.fileObject||!t.active)&&e&&e.fileObject&&e.active&&this.uploading--,this.active&&(!!t!=!!e||t.active!==e.active)&&this.watchActive(!0)},emitInput:function(){this.$emit("update:modelValue",this.files)},upload:function(t){var e=this.get(t);if(!e)return Promise.reject(new Error("not_exists"));if(!e.fileObject)return Promise.reject(new Error("file_object"));if(e.error)return e.error instanceof Error?Promise.reject(e.error):Promise.reject(new Error(e.error));if(e.success)return Promise.resolve(e);if(e.name&&this.iExtensions&&e.type!=="text/directory"&&e.name.search(this.iExtensions)===-1)return Promise.reject(new Error("extension"));if(this.size>0&&e.size!==void 0&&e.size>=0&&e.size>this.size&&e.type!=="text/directory")return Promise.reject(new Error("size"));if(this.customAction)return this.customAction(e,this);if(this.features.html5){if(this.shouldUseChunkUpload(e))return this.uploadChunk(e);if(e.putAction)return this.uploadPut(e);if(e.postAction)return this.uploadHtml5(e)}return e.postAction?this.uploadHtml4(e):Promise.reject(new Error("No action configured"))},shouldUseChunkUpload:function(t){return this.chunkEnabled&&!!this.chunkOptions.handler&&t.size&&t.size>this.chunkOptions.minSize},uploadChunk:function(t){var e=this.chunkOptions.handler;return t.chunk=new e(t,this.chunkOptions),t.chunk.upload().then(function(r){return t})},uploadPut:function(t){var e=[],r;for(var n in t.data)r=t.data[n],r!=null&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));var o=t.putAction||"",l=e.length?(o.indexOf("?")===-1?"?":"&")+e.join("&"):"",b=new XMLHttpRequest;return b.open("PUT",o+l),this.uploadXhr(b,t,t.file)},uploadHtml5:function(t){var e=new window.FormData,r;for(var n in t.data)r=t.data[n],r&&j(r)==="object"&&typeof r.toString!="function"?r instanceof File?e.append(n,r,r.name):e.append(n,JSON.stringify(r)):r!=null&&e.append(n,r);e.append(this.name,t.file,t.name||t.file.name||t.file.filename);var o=new XMLHttpRequest;return o.open("POST",t.postAction||""),this.uploadXhr(o,t,e)},uploadXhr:function(t,e,r){var n=this,o=e,l=0,b=0;t.upload.onprogress=function(A){if(o&&(o=n.get(o),!(!A.lengthComputable||!o||!o.fileObject||!o.active))){var S=Math.round(Date.now()/1e3);S!==l&&(l=S,o=n.update(o,{progress:(A.loaded/A.total*100).toFixed(2),speed:A.loaded-b}),b=A.loaded)}};var k=window.setInterval(function(){if(o&&(o=n.get(o))){var A;if((A=o)!==null&&A!==void 0&&A.fileObject&&!o.success&&!o.error&&o.active)return}k&&(clearInterval(k),k=void 0);try{t.abort(),t.timeout=1}catch{}},100);return new Promise(function(A,S){if(!o){S(new Error("not_exists"));return}var B,C=function(G){if(!B){if(B=!0,k&&(clearInterval(k),k=void 0),!o)return S(new Error("not_exists"));if(o=n.get(o),!o)return S(new Error("not_exists"));if(!o.fileObject)return S(new Error("file_object"));if(o.error)return o.error instanceof Error?S(o.error):S(new Error(o.error));if(!o.active)return S(new Error("abort"));if(o.success)return A(o);var L={};switch(G.type){case"timeout":case"abort":L.error=G.type;break;case"error":t.status?t.status>=500?L.error="server":t.status>=400&&(L.error="denied"):L.error="network";break;default:t.status>=500?L.error="server":t.status>=400?L.error="denied":L.progress="100.00"}if(t.responseText){var F=t.getResponseHeader("Content-Type");F&&F.indexOf("/json")!==-1?L.response=JSON.parse(t.responseText):L.response=t.responseText}return o=n.update(o,L),o?o.error?o.error instanceof Error?S(o.error):S(new Error(o.error)):A(o):S(new Error("abort"))}};t.onload=C,t.onerror=C,t.onabort=C,t.ontimeout=C,o.timeout&&(t.timeout=o.timeout);for(var R in o.headers)t.setRequestHeader(R,o.headers[R]);o=n.update(o,{xhr:t}),o&&t.send(r)})},uploadHtml4:function(t){var e=this,r=t;if(!r)return Promise.reject(new Error("not_exists"));var n=function(C){C.keyCode===27&&C.preventDefault()},o=document.createElement("iframe");o.id="upload-iframe-"+r.id,o.name="upload-iframe-"+r.id,o.src="about:blank",o.setAttribute("style","width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;");var l=document.createElement("form");l.setAttribute("action",r.postAction||""),l.name="upload-form-"+r.id,l.setAttribute("method","POST"),l.setAttribute("target","upload-iframe-"+r.id),l.setAttribute("enctype","multipart/form-data");for(var b in r.data){var k=r.data[b];if(k&&j(k)==="object"&&typeof k.toString!="function"&&(k=JSON.stringify(k)),k!=null){var A=document.createElement("input");A.type="hidden",A.name=b,A.value=k,l.appendChild(A)}}l.appendChild(r.el),document.body.appendChild(o).appendChild(l);var S=function(){var C,R;try{o.contentWindow&&(R=o.contentWindow.document)}catch{}if(!R)try{R=o.contentDocument?o.contentDocument:o.document}catch{R=o.document}return(C=R)!==null&&C!==void 0&&C.body?R.body.innerHTML:null};return new Promise(function(B,C){setTimeout(function(){if(!r){C(new Error("not_exists"));return}if(r=e.update(r,{iframe:o}),!r)return C(new Error("not_exists"));var R=window.setInterval(function(){r&&(r=e.get(r))&&r.fileObject&&!r.success&&!r.error&&r.active||(R&&(clearInterval(R),R=void 0),o.onabort({type:r?"abort":"not_exists"}))},100),X,G=function(F){var et;if(!X){if(X=!0,R&&(clearInterval(R),R=void 0),document.body.removeEventListener("keydown",n),!r)return C(new Error("not_exists"));if(r=e.get(r),!r)return C(new Error("not_exists"));if(!r.fileObject)return C(new Error("file_object"));if(r.error)return r.error instanceof Error?C(r.error):C(new Error(r.error));if(!r.active)return C(new Error("abort"));if(r.success)return B(r);var J=S(),tt={};if(typeof F=="string")return C(new Error(F));switch(F.type){case"abort":tt.error="abort";break;case"error":r.error?tt.error=r.error:J===null?tt.error="network":tt.error="denied";break;default:r.error?tt.error=r.error:J===null?tt.error="network":tt.progress="100.00"}if(J!==null){if(J&&J.substr(0,1)==="{"&&J.substr(J.length-1,1)==="}")try{J=JSON.parse(J)}catch{}tt.response=J}return r=e.update(r,tt),r?(et=r)!==null&&et!==void 0&&et.error?r.error instanceof Error?C(r.error):C(new Error(r.error)):B(r):C(new Error("not_exists"))}};o.onload=G,o.onerror=G,o.onabort=G,document.body.addEventListener("keydown",n),l.submit()},50)}).then(function(B){var C;return o==null||(C=o.parentNode)===null||C===void 0||C.removeChild(o),B}).catch(function(B){var C;return o==null||(C=o.parentNode)===null||C===void 0||C.removeChild(o),B})},watchActive:function(t){for(var e,r=0;e=this.files[r];)if(r++,e.fileObject)if(t&&!this.destroy){if(this.uploading>=this.thread||this.uploading&&!this.features.html5)break;!e.active&&!e.error&&!e.success&&this.update(e,{active:!0})}else e.active&&this.update(e,{active:!1});this.uploading===0&&(this.active=!1)},watchDrop:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this.features.drop&&t!==e){if(this.dropElement)try{document.removeEventListener("dragenter",this.onDocumentDragenter,!1),document.removeEventListener("dragleave",this.onDocumentDragleave,!1),document.removeEventListener("dragover",this.onDocumentDragover,!1),document.removeEventListener("drop",this.onDocumentDrop,!1),this.dropElement.removeEventListener("dragenter",this.onDragenter,!1),this.dropElement.removeEventListener("dragleave",this.onDragleave,!1),this.dropElement.removeEventListener("dragover",this.onDragover,!1),this.dropElement.removeEventListener("drop",this.onDrop,!1)}catch{}var r=null;if(t)if(typeof t=="string")r=document.querySelector(t)||this.$root.$el.querySelector(t);else if(t===!0){var n;if(r=this.$parent.$el,!r||((n=r)===null||n===void 0?void 0:n.nodeType)===8){var o;r=this.$root.$el,(!r||((o=r)===null||o===void 0?void 0:o.nodeType)===8)&&(r=document.body)}}else r=t;this.dropElement=r,this.dropElement&&(document.addEventListener("dragenter",this.onDocumentDragenter,!1),document.addEventListener("dragleave",this.onDocumentDragleave,!1),document.addEventListener("dragover",this.onDocumentDragover,!1),document.addEventListener("drop",this.onDocumentDrop,!1),this.dropElement.addEventListener("dragenter",this.onDragenter,!1),this.dropElement.addEventListener("dragleave",this.onDragleave,!1),this.dropElement.addEventListener("dragover",this.onDragover,!1),this.dropElement.addEventListener("drop",this.onDrop,!1))}},watchDropActive:function(t,e){t!==e&&(!t&&this.dropElementActive&&(this.dropElementActive=!1),this.dropTimeout&&(clearTimeout(this.dropTimeout),this.dropTimeout=null),t&&(this.dropTimeout=setTimeout(this.onDocumentDrop,1e3)))},onDocumentDragenter:function(t){var e,r;if(!this.dropActive&&t.dataTransfer){var n=t.dataTransfer;n!=null&&(e=n.files)!==null&&e!==void 0&&e.length?this.dropActive=!0:n.types?n.types.indexOf&&n.types.indexOf("Files")!==-1?this.dropActive=!0:(r=n.types)!==null&&r!==void 0&&r.contains&&n.types.contains("Files")&&(this.dropActive=!0):this.dropActive=!0,this.dropActive&&this.watchDropActive(!0)}},onDocumentDragleave:function(t){this.dropActive&&(t.target===t.explicitOriginalTarget||!t.fromElement&&(t.clientX<=0||t.clientY<=0||t.clientX>=window.innerWidth||t.clientY>=window.innerHeight))&&(this.dropActive=!1,this.watchDropActive(!1))},onDocumentDragover:function(){this.watchDropActive(!0)},onDocumentDrop:function(){this.dropActive=!1,this.watchDropActive(!1)},onDragenter:function(t){!this.dropActive||this.dropElementActive||(this.dropElementActive=!0)},onDragleave:function(t){var e;if(this.dropElementActive){var r=t.relatedTarget;if(!r)this.dropElementActive=!1;else if((e=this.dropElement)!==null&&e!==void 0&&e.contains)this.dropElement.contains(r)||(this.dropElementActive=!1);else{for(var n=r;n&&n!==this.dropElement;)n=n.parentNode;n!==this.dropElement&&(this.dropElementActive=!1)}}},onDragover:function(t){t.preventDefault()},onDrop:function(t){t.preventDefault(),t.dataTransfer&&this.addDataTransfer(t.dataTransfer)},inputOnChange:async function(t){var e=this;if(!(t.target instanceof HTMLInputElement))return Promise.reject(new Error("not HTMLInputElement"));t.target;var r=function(o){return e.reload=!0,e.$nextTick(function(){e.reload=!1}),o};return this.addInputFile(t.target).then(r).catch(r)},isRelatedTargetSupported:function(){try{var t=new MouseEvent("mouseout",{relatedTarget:document.body});return"relatedTarget"in t}catch{return!1}}}}),_=["for"],g=["name","id","accept","capture","disabled","webkitdirectory","allowdirs","directory","multiple"];function E(i,t,e,r,n,o){return v.openBlock(),v.createElementBlock("span",{class:v.normalizeClass(i.className)},[v.renderSlot(i.$slots,"default"),v.createElementVNode("label",{for:i.forId},null,8,_),i.reload?v.createCommentVNode("",!0):(v.openBlock(),v.createElementBlock("input",{key:0,ref:"input",type:"file",name:i.name,id:i.forId,accept:i.accept,capture:i.capture,disabled:i.disabled,webkitdirectory:i.iDirectory,allowdirs:i.iDirectory,directory:i.iDirectory,multiple:i.multiple&&i.features.html5,onChange:t[0]||(t[0]=function(){return i.inputOnChange&&i.inputOnChange.apply(i,arguments)})},null,40,g))],2)}function V(i,t){t===void 0&&(t={});var e=t.insertAt;if(!(!i||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=i:n.appendChild(document.createTextNode(i))}}var H=`
.file-uploads {
  overflow: hidden;
  position: relative;
  text-align: center;
  display: inline-block;
}
.file-uploads.file-uploads-html4 input,
.file-uploads.file-uploads-html5 label {
  /* background fix ie  click */
  background: #fff;
  opacity: 0;
  font-size: 20em;
  z-index: 1;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  position: absolute;
  width: 100%;
  height: 100%;
}
.file-uploads.file-uploads-html5 input,
.file-uploads.file-uploads-html4 label {
  /* background fix ie  click */
  position: absolute;
  background: rgba(255, 255, 255, 0);
  overflow: hidden;
  position: fixed;
  width: 1px;
  height: 1px;
  z-index: -1;
  opacity: 0;
}
`;return V(H),x.render=E,x})})(ct);var Ct=ct.exports;const St=lt(Ct);const wt={components:{FileUpload:St},props:{uploadedFiles:{default:[]},front:{default:!0}},data(){return{cbxmcratingreview_vue_var,files:[],accept:cbxmcratingreview_vue_var.accept_file_types,extensions:cbxmcratingreview_vue_var.accept_file_types,minSize:1024,size:1024*1024*cbxmcratingreview_vue_var.max_file_size,fileUploadLimit:cbxmcratingreview_vue_var.max_number_of_files,drop:!0,name:"file",file_upload_length:0,uploadAuto:!0,log_id:Number(this.$route.params.id),front:this.front?"1":"0"}},watch:{files:function(f,h){this.uploadAuto&&Object.keys(f).length>Object.keys(h).length&&this.handleFileUpload()}},methods:{inputFilter(f,h,v){if(f&&!h&&(/(\/|^)(Thumbs\.db|desktop\.ini|\..+)$/.test(f.name)||/\.(php5?|html?|jsx?)$/i.test(f.name)&&f.type!=="text/directory"))return v();if(f&&f.error===""&&f.file&&(!h||f.file!==h.file)){f.blob="";let s=window.URL||window.webkitURL;s&&(f.blob=s.createObjectURL(f.file)),f.thumb="",f.blob&&f.type.substr(0,6)==="image/"&&(f.thumb=f.blob)}if(f&&f.error===""&&f.type.substr(0,6)==="image/"&&f.blob&&(!h||f.blob!==h.blob)){let s=new Image;s.onload=()=>{this.$refs.upload.update(f,{error:"",height:s.height,width:s.width})},s.οnerrοr=a=>{this.$refs.upload.update(f,{error:"parsing image size"})},s.src=f.blob}},inputFile(f,h){if(f&&h&&f.active&&!h.active&&f.size>=0&&this.minSize>0&&f.size<this.minSize&&f.type!=="text/directory"&&this.$refs.upload.update(f,{error:"size"}),f&&f.size>this.size&&(f.error="File size is too big"),f){var v=f.type;const a=v.split("/")[1];f&&!this.accept.includes(a)&&(f.error="File Type is not allowed")}let s=0;this.files.length&&(s+=this.files.length),this.uploadedFiles.length&&(s+=this.uploadedFiles.length),this.file_upload_length=s,Number(this.fileUploadLimit)&&s>this.fileUploadLimit&&(f.error="Upload file limit exceeded")},handleFileUpload(){if(this.files.length){let f=[];for(let s=0;s<this.files.length;s++){let a=this.files[s];if(a.error==="File size is too big"){this.errorToast(a.error+" for file "+a.name);continue}if(a.error==="File Type is not allowed"){this.errorToast(a.error+" for file "+a.name);continue}if(a.error==="Upload file limit exceeded"){this.errorToast(a.error+" for file "+a.name);continue}a.fileObject&&(f[s]=a)}if(f.length<1)return;const h=new FormData;h.append("log_id",this.log_id),f.forEach((s,a)=>{h.append(`files_${a}`,s==null?void 0:s.file)});let v=cbxmcratingreview_vue_var.rest_end_points.imageUpload;this.axios.post(v,h,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{var a,m,w,u,O,P,D;(a=s==null?void 0:s.data)!=null&&a.success?(this.successToast((m=s==null?void 0:s.data)==null?void 0:m.info),this.$emit("refreshData",(w=s==null?void 0:s.data)==null?void 0:w.data),this.files=[]):(u=s==null?void 0:s.data)!=null&&u.errors?Object.entries((O=s==null?void 0:s.data)==null?void 0:O.errors).forEach(([M,j])=>{it.fire({icon:"error",title:j,timer:1500,html:" ",customClass:{container:"swal2-container-cbx"}})}):(P=s==null?void 0:s.data)!=null&&P.info&&this.errorToast((D=s==null?void 0:s.data)==null?void 0:D.info)})}},onRemoveClick(f){let h=new FormData;h.append("file_name",f),h.append("log_id",this.log_id),it.fire({title:this.cbxmcratingreview_vue_var.translations.delete_confirmation_title,text:this.cbxmcratingreview_vue_var.translations.delete_confirmation_txt,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.cbxmcratingreview_vue_var.translations.delete_btn_txt,customClass:{container:"swal2-container-cbx"}}).then(v=>{v.isConfirmed&&this.axios.post(cbxmcratingreview_vue_var.rest_end_points.deleteImage,h).then(s=>{s.data.success?(this.successToast(s.data.info),this.$emit("refreshData",s.data.data)):this.errorMessage(s.data.info)}).catch(s=>{this.errorMessage(s)})})}}},Ot={class:"example-full"},xt={class:"drop-active"},kt={class:"upload"},Et={class:"table-responsive"},At={class:"table table-hover"},Rt={key:0},Dt={colspan:"9"},Pt={class:"text-center p-5"},It=["for"],jt={class:"filename"},Bt=["src"],Tt=["onClick"],Mt=["src"],Nt={key:1},zt=["onClick"],Ut={class:"example-foorer"},Lt={key:0,class:"button success mt-10",for:"file"};function Vt(f,h,v,s,a,m){const w=gt("file-upload",!0);return K(),Y("div",Ot,[mt(I("div",xt,[I("h3",null,Z(a.cbxmcratingreview_vue_var.translations.drop_files_to_upload),1)],512),[[_t,f.$refs.upload&&f.$refs.upload.dropActive]]),I("div",kt,[I("div",Et,[I("table",At,[I("thead",null,[I("tr",null,[I("th",null,Z(a.cbxmcratingreview_vue_var.translations.thumb),1),I("th",null,Z(a.cbxmcratingreview_vue_var.translations.action),1)])]),I("tbody",null,[!a.files.length&&!v.uploadedFiles.length?(K(),Y("tr",Rt,[I("td",Dt,[I("div",Pt,[I("h4",null,[nt(Z(a.cbxmcratingreview_vue_var.translations.drop_files_anywhere_to_upload)+" ",1),h[1]||(h[1]=I("br",null,null,-1)),nt(" "+Z(a.cbxmcratingreview_vue_var.translations.or),1)]),I("label",{for:a.name,class:"button btn-lg primary"},Z(a.cbxmcratingreview_vue_var.translations.select_files),9,It)])])])):rt("",!0),(K(!0),Y(ot,null,at(a.files,u=>(K(),Y("tr",{key:u.id},[I("td",null,[I("div",jt,[u.thumb?(K(),Y("img",{key:0,class:"td-image-thumb",src:u.thumb},null,8,Bt)):rt("",!0)])]),I("td",null,[I("a",{class:"button error dropdown-item",href:"#",onClick:st(O=>f.$refs.upload.remove(u),["prevent"])},Z(a.cbxmcratingreview_vue_var.translations.remove),9,Tt)])]))),128)),(K(!0),Y(ot,null,at(v.uploadedFiles,(u,O)=>(K(),Y("tr",null,[I("td",null,[u?(K(),Y("img",{key:0,class:"td-image-thumb",src:a.cbxmcratingreview_vue_var.ratingreview_upload_base_url+a.log_id+"/"+u},null,8,Mt)):(K(),Y("span",Nt,Z(a.cbxmcratingreview_vue_var.translations.no_image),1))]),I("td",null,[I("a",{class:"button error dropdown-item",href:"#",onClick:st(P=>m.onRemoveClick(u),["prevent"])},Z(a.cbxmcratingreview_vue_var.translations.remove),9,zt)])]))),256))])])]),I("div",Ut,[yt(w,{accept:a.accept,drop:a.drop,modelValue:a.files,"onUpdate:modelValue":h[0]||(h[0]=u=>a.files=u),onInputFilter:m.inputFilter,onInputFile:m.inputFile,ref:"upload"},null,8,["accept","drop","modelValue","onInputFilter","onInputFile"]),a.files.length||v.uploadedFiles.length?(K(),Y("label",Lt,Z(a.cbxmcratingreview_vue_var.translations.add_more),1)):rt("",!0)])])])}const Xt=vt(wt,[["render",Vt]]);export{Xt as F,qt as S};
